(function(t){function e(e){for(var o,c,i=e[0],l=e[1],u=e[2],s=0,p=[];s<i.length;s++)c=i[s],Object.prototype.hasOwnProperty.call(r,c)&&r[c]&&p.push(r[c][0]),r[c]=0;for(o in l)Object.prototype.hasOwnProperty.call(l,o)&&(t[o]=l[o]);f&&f(e);while(p.length)p.shift()();return a.push.apply(a,u||[]),n()}function n(){for(var t,e=0;e<a.length;e++){for(var n=a[e],o=!0,i=1;i<n.length;i++){var l=n[i];0!==r[l]&&(o=!1)}o&&(a.splice(e--,1),t=c(c.s=n[0]))}return t}var o={},r={app:0},a=[];function c(e){if(o[e])return o[e].exports;var n=o[e]={i:e,l:!1,exports:{}};return t[e].call(n.exports,n,n.exports,c),n.l=!0,n.exports}c.m=t,c.c=o,c.d=function(t,e,n){c.o(t,e)||Object.defineProperty(t,e,{enumerable:!0,get:n})},c.r=function(t){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},c.t=function(t,e){if(1&e&&(t=c(t)),8&e)return t;if(4&e&&"object"===typeof t&&t&&t.__esModule)return t;var n=Object.create(null);if(c.r(n),Object.defineProperty(n,"default",{enumerable:!0,value:t}),2&e&&"string"!=typeof t)for(var o in t)c.d(n,o,function(e){return t[e]}.bind(null,o));return n},c.n=function(t){var e=t&&t.__esModule?function(){return t["default"]}:function(){return t};return c.d(e,"a",e),e},c.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},c.p="";var i=window["webpackJsonp"]=window["webpackJsonp"]||[],l=i.push.bind(i);i.push=e,i=i.slice();for(var u=0;u<i.length;u++)e(i[u]);var f=l;a.push([0,"chunk-vendors"]),n()})({0:function(t,e,n){t.exports=n("56d7")},"364d":function(t,e,n){t.exports=n.p+"img/square.40d3af04.jpg"},"56d7":function(t,e,n){"use strict";n.r(e);n("e260"),n("e6cf"),n("cca6"),n("a79d");var o=n("7a23");function r(t,e,n,r,a,c){var i=Object(o["g"])("game");return Object(o["d"])(),Object(o["b"])(i,{msg:"Welcome to Your Vue.js App"})}var a=Object(o["i"])("data-v-1bfa8ec2");Object(o["f"])("data-v-1bfa8ec2");var c={class:"game"},i=Object(o["c"])("div",null,"Reversi",-1),l=Object(o["c"])("span",null,"黑棋:",-1),u=Object(o["c"])("span",null,"白棋:",-1);Object(o["e"])();var f=a((function(t,e,n,r,a,f){return Object(o["d"])(),Object(o["b"])("div",c,[i,Object(o["c"])("div",null,[Object(o["c"])("canvas",{ref:"game",width:"500",height:"500",onClick:e[1]||(e[1]=function(){return f.onGameClick&&f.onGameClick.apply(f,arguments)})},null,512)]),Object(o["c"])("div",null,[Object(o["c"])("ul",null,[Object(o["c"])("li",null,[l,Object(o["c"])("span",null,Object(o["h"])(a.black),1)]),Object(o["c"])("li",null,[u,Object(o["c"])("span",null,Object(o["h"])(a.white),1)])])])])})),s=n("b85c"),p=(n("96cf"),n("1da1")),v=n("5a89"),d=n("22b5"),b=(n("99af"),n("b0c0"),n("d3b7"),n("3ca3"),n("ddb0"),n("04d3"),n("364d")),h=n.n(b),E=function t(){var e=this;e.row=NaN,e.col=NaN,e.init=function(){var n=new v["a"](t.WIDTH,t.HEIGHT,t.WIDTH),o=(new v["k"]).load(h.a),r=new v["f"]({color:16755200,map:o});v["e"].call(e,n,r)},e.blink=function(){e.position.y+=5},e.init()};E.WIDTH=10,E.HEIGHT=2,E.prototype=Object.create(v["e"].prototype),E.prototype.constructor=E;var y=E,O=(n("c740"),n("3835")),w=function t(){var e=this,n=null;function o(e,o,a){if(0!==n[e][o])return!1;if(!r(o,e))return!1;n[e][o]=a;for(var c=[],i=a===t.CHESS.BLACK?t.CHESS.WHITE:t.CHESS.BLACK,l=[[0,1],[1,1],[1,0],[1,-1],[0,-1],[-1,-1],[-1,0],[-1,1]],u=0,f=l;u<f.length;u++){var s=f[u],p=Object(O["a"])(s,2),v=p[0],d=p[1],b=parseInt(o),h=parseInt(e);if(b+=v,h+=d,r(h,b)&&n[h][b]===i)do{if(b+=v,h+=d,!r(h,b))break}while(n[h][b]===i);if(r(h,b)&&n[h][b]===a)while(r(h,b)){if(b-=v,h-=d,h==parseInt(e)&&b==parseInt(o))break;c.push({col:b,row:h})}}return n[e][o]=0,0!==c.length&&c}function r(e,n){return e>=0&&e<=t.ROW-1&&n>=0&&n<=t.COL-1}function a(){var e,o={black:0,white:0},r=Object(s["a"])(n);try{for(r.s();!(e=r.n()).done;){var a,c=e.value,i=Object(s["a"])(c);try{for(i.s();!(a=i.n()).done;){var l=a.value;l===t.CHESS.BLACK?o.black++:l===t.CHESS.WHITE&&o.white++}}catch(u){i.e(u)}finally{i.f()}}}catch(u){r.e(u)}finally{r.f()}return o}e.init=function(){e.reset()},e.reset=function(){n=[];for(var e=0;e<t.ROW;e++){for(var o=[],r=0;r<t.COL;r++)o.push(0);n.push(o)}},e.start=function(){var o=[];o.push({row:3,col:4,color:t.CHESS.BLACK}),o.push({row:3,col:3,color:t.CHESS.WHITE}),o.push({row:4,col:3,color:t.CHESS.BLACK}),o.push({row:4,col:4,color:t.CHESS.WHITE});for(var r=0,a=o;r<a.length;r++){var c=a[r],i=c.row,l=c.col,u=c.color;n[i][l]=u}t.CHESS.BLACK;var f={type:t.EVENT.START,data:o};e.dispatchEvent(f)},e.getData=function(){return n},e.move=function(r,c,i){var l=o(r,c,i);if(l){var u,f=Object(s["a"])(l);try{for(f.s();!(u=f.n()).done;){var p=u.value;n[p.row][p.col]=i}}catch(h){f.e(h)}finally{f.f()}n[r][c]=i;var v=a(),d={row:r,col:c,color:i,flips:l,count:v},b={type:t.EVENT.MOVE,data:d};e.dispatchEvent(b)}},e.getLegal=function(e){var a=[[-1,0],[-1,1],[0,1],[1,1],[1,0],[1,-1],[0,-1],[-1,-1]],c=e===t.CHESS.BLACK?t.CHESS.WHITE:t.CHESS.BLACK,i=[];for(var l in n)for(var u in n[l])if(n[l][u]===c){var f,p=Object(s["a"])(a);try{var v=function(){var e=f.value,o=Object(O["a"])(e,2),a=o[0],c=o[1],s=parseInt(u)+a,p=parseInt(l)+c;r(p,s)&&n[p][s]===t.CHESS.NONE&&-1===i.findIndex((function(t){return t[0]===s&&t[1]===p}))&&i.push([s,p])};for(p.s();!(f=p.n()).done;)v()}catch(y){p.e(y)}finally{p.f()}}for(var d=[],b=0,h=i;b<h.length;b++){var E=h[b];o(E[1],E[0],e)&&d.push(E)}return d},e.init()};w.ROW=8,w.COL=8,w.CHESS={NONE:0,BLACK:1,WHITE:2},w.EVENT={START:"gameStart",GAME_OVER:"gameOver",MOVE:"chessMove",FLIP:"chessFlip"},Object.assign(w.prototype,v["d"].prototype),w.prototype.constructor=w;var S=w,m=function t(e){var n=this;n.init=function(e){var o=new v["c"](t.RADIUS,t.RADIUS,t.WIDTH,t.SEGMENT),r=[new v["f"]({color:"red"}),new v["f"]({color:"black"}),new v["f"]({color:"white"})];v["e"].call(n,o,r),e==S.CHESS.WHITE&&(n.rotation.x=Math.PI)},n.move=function(){return new Promise((function(t){var e={y:10},o=new d["b"](e).to({y:0},500).easing(d["a"].Quadratic.In);o.onUpdate((function(t){n.position.y=t.y})),o.onComplete((function(e){t(e)})),o.start()}))},n.flip=function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0;return new Promise((function(e){var o={x:0},r=n.rotation.x,a={y:0},c=new d["b"](a).to({y:10},300).onUpdate((function(t){n.position.y=t.y})),i=new d["b"](a).to({y:0},200).onUpdate((function(t){n.position.y=t.y})),l=new d["b"](o).to({x:Math.PI},300).onUpdate((function(t){n.rotation.x=r+t.x}));l.onComplete((function(t){e(t)})),l.chain(i),c.chain(l),c.delay(t),c.start()}))},n.init(e)};m.RADIUS=4,m.HEIGHT=1,m.SEGMENT=20,m.prototype=Object.create(v["e"].prototype),m.prototype.constructor=m;var g=m,j=function(){var t=this,e=null,n=null;t.offset={row:0,col:0},t.init=function(){v["g"].call(t),e=new v["g"],n=new v["g"],t.add(e,n)},t.hit=function(t){var n=t.intersectObjects(e.children),o=null;return n.length>0&&(o=n[0]),o},t.pave=function(o){for(var r in e.clear(),t.offset.row=o.length/2*y.WIDTH-y.WIDTH/2,t.offset.col=t.offset.row,o)for(var a in o[r]){var c=new y;c.row=r,c.col=a,c.position.x=a*y.WIDTH,c.position.z=r*y.WIDTH,e.add(c)}e.position.set(-t.offset.col,0,-t.offset.row),n.position.set(-t.offset.col,y.HEIGHT,-t.offset.row)},t.move=function(t,e,o){var r=new g(o);return r.position.x=e*y.WIDTH,r.position.z=t*y.WIDTH,r.name="".concat(t,"-").concat(e),n.add(r),r.move()},t.flip=function(t){var e=[];if(t)for(var o in t){var r=t[o],a=r.row,c=r.col,i=n.getObjectByName("".concat(a,"-").concat(c));e.push(i.flip(500*parseInt(o)))}return Promise.all(e)},t.init()};j.prototype=Object.create(v["g"].prototype),j.prototype.constructor=j;var H=j,T=n("53ca"),C=n("d4ec"),I=n("bee2"),A=function(){function t(){Object(C["a"])(this,t),this._table=[[[0,0],[0,7],[7,0],[7,7]],[[2,2],[2,5],[5,2],[5,5]],[[3,2],[3,5],[4,2],[4,5],[2,3],[2,4],[5,3],[5,4]],[[2,0],[2,7],[5,0],[5,7],[0,2],[0,5],[7,2],[7,5]],[[3,0],[3,7],[4,0],[4,7],[0,3],[0,4],[7,3],[7,4]],[[2,1],[2,6],[5,1],[5,6],[1,2],[1,5],[6,2],[6,5]],[[3,1],[3,6],[4,1],[4,6],[1,3],[1,4],[6,3],[6,4]],[[1,1],[1,6],[6,1],[6,6]],[[1,0],[1,7],[6,0],[6,7],[0,1],[0,6],[7,1],[7,6]]]}return Object(I["a"])(t,[{key:"select",value:function(t){if(!(t&&t.length>0))return!1;var e,n=Object(s["a"])(this._table);try{for(n.s();!(e=n.n()).done;){var o=e.value;o.sort((function(){return.5-Math.random()}));var r,a=Object(s["a"])(o);try{var c=function(){var e=r.value;if(t.findIndex((function(t){return t[0]===e[0]&&t[1]===e[1]}))>-1)return{v:e}};for(a.s();!(r=a.n()).done;){var i=c();if("object"===Object(T["a"])(i))return i.v}}catch(l){a.e(l)}finally{a.f()}}}catch(l){n.e(l)}finally{n.f()}}}]),t}(),x=A,k=function t(){var e=this,n=null;e.init=function(){n=new x},e.getColor=function(){return S.CHESS.WHITE},e.think=function(o){var r=n.select(o),a=Object(O["a"])(r,2),c=a[0],i=a[1],l={col:c,row:i,color:e.getColor()};setTimeout((function(){var n={type:t.EVENT.MOVE,data:l};e.dispatchEvent(n)}),1e3)},e.init()};k.EVENT={MOVE:"aiPlayerMove"},k.prototype=Object.create(v["d"].prototype),k.prototype.constructor=k;var M=k,_={RUNNING:"running",MODEL_LOADED:"modeLoaded",PERSON_FAIL:"personFail",GAME_INIT:"gameInit",GAME_START:"gameStart",GAME_STEP:"gameStep",GAME_OVER:"gameOver"},L=function(t){var e=this,n=0,o=0,r=null,a=null,c=null,i=null,l=null,u=null,f={},b=null,h=null,E=!1;function y(){b=b===S.CHESS.BLACK?S.CHESS.WHITE:S.CHESS.BLACK;var t=u.getLegal(b);t?"player"===f[b]?E=!0:"ai"===f[b]&&h.think(t):y()}function O(t){return w.apply(this,arguments)}function w(){return w=Object(p["a"])(regeneratorRuntime.mark((function t(e){var n,o,r,a,c,l,u;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:n=e.data,o=Object(s["a"])(n),t.prev=2,o.s();case 4:if((r=o.n()).done){t.next=11;break}return a=r.value,c=a.row,l=a.col,u=a.color,t.next=9,i.move(c,l,u);case 9:t.next=4;break;case 11:t.next=16;break;case 13:t.prev=13,t.t0=t["catch"](2),o.e(t.t0);case 16:return t.prev=16,o.f(),t.finish(16);case 19:E=!0;case 20:case"end":return t.stop()}}),t,null,[[2,13,16,19]])}))),w.apply(this,arguments)}function m(t){E=!1;var n=t.data,o=n.row,r=n.col,a=n.color,c=n.flips,l=n.count;i.move(o,r,a).then((function(){i.flip(c).then((function(){var t={type:_.GAME_STEP,data:l};e.dispatchEvent(t),y()}))}))}function g(t){var e=t.data,n=e.row,o=e.col,r=e.color;u.move(n,o,r)}function j(t){requestAnimationFrame(j),d["c"].update(t),c.render(a,r)}e.init=function(t){n=500,o=500,a=new v["j"],a.background=new v["b"]("skyblue"),r=new v["h"](75,n/o,1,1e3),r.position.set(0,60,20),c=new v["m"]({canvas:t}),c.setSize(n,o),l=new v["i"],u=new S,u.addEventListener(S.EVENT.START,O),u.addEventListener(S.EVENT.MOVE,m),i=new H,i.pave(u.getData()),a.add(i),r.lookAt(i.position),j(0)},e.start=function(){h=new M,h.addEventListener(M.EVENT.MOVE,g),f[S.CHESS.BLACK]="player",f[S.CHESS.WHITE]="ai",b=S.CHESS.BLACK,u.start()},e.click=function(t,e){if(E){var a=new v["l"];a.x=t/n*2-1,a.y=-e/o*2+1,l.setFromCamera(a,r);var c=i.hit(l);if(c){var f=c.object,s=f.row,p=f.col;u.move(s,p,b)}}},e.init(t)};Object.assign(L.prototype,v["d"].prototype),L.prototype.constructor=L;var N={name:"Game",props:{msg:String},data:function(){return{black:0,white:0}},__reversi:null,mounted:function(){this.__reversi=new L(this.$refs["game"]),this.__reversi.addEventListener(_.GAME_STEP,this.onGameStep),this.__reversi.start()},methods:{onGameClick:function(t){this.__reversi.click(t.x-this.$refs["game"].offsetLeft,t.y-this.$refs["game"].offsetTop)},onGameStep:function(t){this.black=t.data.black,this.white=t.data.white}}};n("fa3f");N.render=f,N.__scopeId="data-v-1bfa8ec2";var W=N,G={name:"App",components:{Game:W}};n("5873");G.render=r;var D=G;Object(o["a"])(D).mount("#app")},5873:function(t,e,n){"use strict";n("c551")},"71ea":function(t,e,n){var o=n("24fb");e=o(!1),e.push([t.i,"#app{font-family:Avenir,Helvetica,Arial,sans-serif;-webkit-font-smoothing:antialiased;-moz-osx-font-smoothing:grayscale;text-align:center;color:#2c3e50;margin-top:60px}",""]),t.exports=e},"84c0":function(t,e,n){var o=n("24fb");e=o(!1),e.push([t.i,"h3[data-v-1bfa8ec2]{margin:40px 0 0}ul[data-v-1bfa8ec2]{list-style-type:none;padding:0}li[data-v-1bfa8ec2]{display:inline-block;margin:0 10px}a[data-v-1bfa8ec2]{color:#42b983}",""]),t.exports=e},a1cf:function(t,e,n){var o=n("84c0");"string"===typeof o&&(o=[[t.i,o,""]]),o.locals&&(t.exports=o.locals);var r=n("499e").default;r("2318e3d4",o,!0,{sourceMap:!1,shadowMode:!1})},c551:function(t,e,n){var o=n("71ea");"string"===typeof o&&(o=[[t.i,o,""]]),o.locals&&(t.exports=o.locals);var r=n("499e").default;r("660cbf8c",o,!0,{sourceMap:!1,shadowMode:!1})},fa3f:function(t,e,n){"use strict";n("a1cf")}});
//# sourceMappingURL=app.62e59684.js.map