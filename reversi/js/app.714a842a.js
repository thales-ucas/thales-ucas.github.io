(function(t){function e(e){for(var o,i,c=e[0],l=e[1],u=e[2],f=0,p=[];f<c.length;f++)i=c[f],Object.prototype.hasOwnProperty.call(a,i)&&a[i]&&p.push(a[i][0]),a[i]=0;for(o in l)Object.prototype.hasOwnProperty.call(l,o)&&(t[o]=l[o]);s&&s(e);while(p.length)p.shift()();return r.push.apply(r,u||[]),n()}function n(){for(var t,e=0;e<r.length;e++){for(var n=r[e],o=!0,c=1;c<n.length;c++){var l=n[c];0!==a[l]&&(o=!1)}o&&(r.splice(e--,1),t=i(i.s=n[0]))}return t}var o={},a={app:0},r=[];function i(e){if(o[e])return o[e].exports;var n=o[e]={i:e,l:!1,exports:{}};return t[e].call(n.exports,n,n.exports,i),n.l=!0,n.exports}i.m=t,i.c=o,i.d=function(t,e,n){i.o(t,e)||Object.defineProperty(t,e,{enumerable:!0,get:n})},i.r=function(t){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},i.t=function(t,e){if(1&e&&(t=i(t)),8&e)return t;if(4&e&&"object"===typeof t&&t&&t.__esModule)return t;var n=Object.create(null);if(i.r(n),Object.defineProperty(n,"default",{enumerable:!0,value:t}),2&e&&"string"!=typeof t)for(var o in t)i.d(n,o,function(e){return t[e]}.bind(null,o));return n},i.n=function(t){var e=t&&t.__esModule?function(){return t["default"]}:function(){return t};return i.d(e,"a",e),e},i.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},i.p="";var c=window["webpackJsonp"]=window["webpackJsonp"]||[],l=c.push.bind(c);c.push=e,c=c.slice();for(var u=0;u<c.length;u++)e(c[u]);var s=l;r.push([0,"chunk-vendors"]),n()})({0:function(t,e,n){t.exports=n("56d7")},"364d":function(t,e,n){t.exports=n.p+"img/square.40d3af04.jpg"},"56d7":function(t,e,n){"use strict";n.r(e);n("e260"),n("e6cf"),n("cca6"),n("a79d");var o=n("7a23");function a(t,e,n,a,r,i){var c=Object(o["h"])("game");return Object(o["e"])(),Object(o["b"])(c,{msg:"Welcome to Your Vue.js App"})}var r=Object(o["m"])("data-v-6339fa50");Object(o["g"])("data-v-6339fa50");var i={class:"game"},c=Object(o["d"])("div",null,[Object(o["d"])("p",null,"苹果棋"),Object(o["d"])("p",null,"Reversi")],-1),l=Object(o["d"])("span",null,"黑棋:",-1),u=Object(o["d"])("span",null,"白棋:",-1),s={class:"start-panel"},f={class:"start-wrap"},p=Object(o["c"])(" 初级 "),d=Object(o["c"])(" 中级 "),v=Object(o["c"])(" alphaGo "),b=Object(o["c"])(" 双人对战 ");Object(o["f"])();var h=r((function(t,e,n,a,r,h){return Object(o["e"])(),Object(o["b"])("div",i,[c,Object(o["d"])("div",null,[Object(o["d"])("canvas",{ref:"game",width:"500",height:"500",style:{width:"100%"},onClick:e[1]||(e[1]=function(){return h.onGameClick&&h.onGameClick.apply(h,arguments)})},null,512)]),Object(o["d"])("div",null,[Object(o["d"])("ul",null,[Object(o["d"])("li",null,[l,Object(o["d"])("span",null,Object(o["i"])(r.black),1)]),Object(o["d"])("li",null,[u,Object(o["d"])("span",null,Object(o["i"])(r.white),1)])])]),Object(o["d"])("div",null,Object(o["i"])(r.msg),1),Object(o["l"])(Object(o["d"])("div",s,[Object(o["d"])("div",f,[Object(o["d"])("p",null,[Object(o["d"])("label",null,[Object(o["l"])(Object(o["d"])("input",{type:"radio",name:"difficulty","onUpdate:modelValue":e[2]||(e[2]=function(t){return r.difficulty=t}),value:"0"},null,512),[[o["j"],r.difficulty]]),p])]),Object(o["d"])("p",null,[Object(o["d"])("label",null,[Object(o["l"])(Object(o["d"])("input",{type:"radio",name:"difficulty","onUpdate:modelValue":e[3]||(e[3]=function(t){return r.difficulty=t}),value:"1"},null,512),[[o["j"],r.difficulty]]),d])]),Object(o["d"])("p",null,[Object(o["d"])("label",null,[Object(o["l"])(Object(o["d"])("input",{type:"radio",name:"difficulty",disabled:"","onUpdate:modelValue":e[4]||(e[4]=function(t){return r.difficulty=t}),value:"2"},null,512),[[o["j"],r.difficulty]]),v])]),Object(o["d"])("p",null,[Object(o["d"])("label",null,[Object(o["l"])(Object(o["d"])("input",{type:"radio",name:"difficulty","onUpdate:modelValue":e[5]||(e[5]=function(t){return r.difficulty=t}),value:"10"},null,512),[[o["j"],r.difficulty]]),b])]),Object(o["d"])("button",{onClick:e[6]||(e[6]=function(){return h.onGameStart&&h.onGameStart.apply(h,arguments)})},"开始游戏")])],512),[[o["k"],r.isStartPanelShow]])])})),y=n("b85c"),m=(n("96cf"),n("1da1")),E=n("5a89"),O=n("22b5"),w=(n("99af"),n("b0c0"),n("d3b7"),n("3ca3"),n("ddb0"),n("04d3"),n("364d")),S=n.n(w),j=function t(){var e=this;e.row=NaN,e.col=NaN,e.init=function(){var n=new E["a"](t.WIDTH,t.HEIGHT,t.WIDTH),o=(new E["k"]).load(S.a),a=new E["f"]({color:16755200,map:o});E["e"].call(e,n,a)},e.blink=function(){e.position.y+=5},e.init()};j.WIDTH=10,j.HEIGHT=2,j.prototype=Object.create(E["e"].prototype),j.prototype.constructor=j;var g=j,T=(n("c740"),n("3835")),H=function t(){var e=this,n=null;function o(e,o,r){if(0!==n[e][o])return!1;if(!a(o,e))return!1;n[e][o]=r;for(var i=[],c=r===t.CHESS.BLACK?t.CHESS.WHITE:t.CHESS.BLACK,l=[[0,1],[1,1],[1,0],[1,-1],[0,-1],[-1,-1],[-1,0],[-1,1]],u=0,s=l;u<s.length;u++){var f=s[u],p=Object(T["a"])(f,2),d=p[0],v=p[1],b=parseInt(o),h=parseInt(e);if(b+=d,h+=v,a(h,b)&&n[h][b]===c)do{if(b+=d,h+=v,!a(h,b))break}while(n[h][b]===c);if(a(h,b)&&n[h][b]===r)while(a(h,b)){if(b-=d,h-=v,h==parseInt(e)&&b==parseInt(o))break;i.push({col:b,row:h})}}return n[e][o]=0,0!==i.length&&i}function a(e,n){return e>=0&&e<=t.ROW-1&&n>=0&&n<=t.COL-1}function r(){var e,o={black:0,white:0,space:0},a=Object(y["a"])(n);try{for(a.s();!(e=a.n()).done;){var r,i=e.value,c=Object(y["a"])(i);try{for(c.s();!(r=c.n()).done;){var l=r.value;l===t.CHESS.BLACK?o.black++:l===t.CHESS.WHITE?o.white++:o.space++}}catch(u){c.e(u)}finally{c.f()}}}catch(u){a.e(u)}finally{a.f()}return o}e.init=function(){e.reset()},e.reset=function(){n=[];for(var e=0;e<t.ROW;e++){for(var o=[],a=0;a<t.COL;a++)o.push(0);n.push(o)}},e.start=function(){var o=[];o.push({row:3,col:4,color:t.CHESS.BLACK}),o.push({row:3,col:3,color:t.CHESS.WHITE}),o.push({row:4,col:3,color:t.CHESS.BLACK}),o.push({row:4,col:4,color:t.CHESS.WHITE});for(var a=0,i=o;a<i.length;a++){var c=i[a],l=c.row,u=c.col,s=c.color;n[l][u]=s}t.CHESS.BLACK;var f={moves:o,count:r()},p={type:t.EVENT.START,data:f};e.dispatchEvent(p)},e.getData=function(){return n},e.move=function(a,i,c){var l=o(a,i,c);if(l){var u,s=Object(y["a"])(l);try{for(s.s();!(u=s.n()).done;){var f=u.value;n[f.row][f.col]=c}}catch(b){s.e(b)}finally{s.f()}n[a][i]=c;var p=r(),d={row:a,col:i,color:c,flips:l,count:p},v={type:t.EVENT.MOVE,data:d};e.dispatchEvent(v)}},e.getLegal=function(e){var r=[[-1,0],[-1,1],[0,1],[1,1],[1,0],[1,-1],[0,-1],[-1,-1]],i=e===t.CHESS.BLACK?t.CHESS.WHITE:t.CHESS.BLACK,c=[];for(var l in n)for(var u in n[l])if(n[l][u]===i){var s,f=Object(y["a"])(r);try{var p=function(){var e=s.value,o=Object(T["a"])(e,2),r=o[0],i=o[1],f=parseInt(u)+r,p=parseInt(l)+i;a(p,f)&&n[p][f]===t.CHESS.NONE&&-1===c.findIndex((function(t){return t[0]===f&&t[1]===p}))&&c.push([f,p])};for(f.s();!(s=f.n()).done;)p()}catch(m){f.e(m)}finally{f.f()}}for(var d=[],v=0,b=c;v<b.length;v++){var h=b[v];o(h[1],h[0],e)&&d.push(h)}return d},e.init()};H.ROW=8,H.COL=8,H.CHESS={NONE:0,BLACK:1,WHITE:2},H.EVENT={START:"gameStart",GAME_OVER:"gameOver",MOVE:"chessMove",FLIP:"chessFlip"},Object.assign(H.prototype,E["d"].prototype),H.prototype.constructor=H;var C=H,I=function t(e){var n=this,o=null;n.init=function(e){var a=new E["c"](t.RADIUS,t.RADIUS,t.WIDTH,t.SEGMENT),r=[new E["f"]({color:"red"}),new E["f"]({color:"black"}),new E["f"]({color:"white"})];E["e"].call(n,a,r),o=parseInt(e),o==C.CHESS.WHITE&&(n.rotation.x=Math.PI)},n.move=function(){return new Promise((function(t){var e={y:10},o=new O["b"](e).to({y:0},500).easing(O["a"].Quadratic.In);o.onUpdate((function(t){n.position.y=t.y})),o.onComplete((function(e){t(e)})),o.start()}))},n.flip=function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0;return new Promise((function(e){var a={x:0};o=o==C.CHESS.WHITE?C.CHESS.BLACK:C.CHESS.WHITE;var r=n.rotation.x,i={y:0},c=new O["b"](i).to({y:10},300).onUpdate((function(t){n.position.y=t.y})),l=new O["b"](i).to({y:0},200).onUpdate((function(t){n.position.y=t.y})),u=new O["b"](a).to({x:Math.PI},300).onUpdate((function(t){n.rotation.x=r+t.x}));u.onComplete((function(t){e(t)})),u.chain(l),c.chain(u),c.delay(t),c.start()}))},n.init(e)};I.RADIUS=4,I.HEIGHT=1,I.SEGMENT=20,I.prototype=Object.create(E["e"].prototype),I.prototype.constructor=I;var x=I,A=function(){var t=this,e=null,n=null;t.offset={row:0,col:0},t.init=function(){E["g"].call(t),e=new E["g"],n=new E["g"],t.add(e,n)},t.hit=function(t){var n=t.intersectObjects(e.children),o=null;return n.length>0&&(o=n[0]),o},t.pave=function(o){for(var a in e.clear(),t.offset.row=o.length/2*g.WIDTH-g.WIDTH/2,t.offset.col=t.offset.row,o)for(var r in o[a]){var i=new g;i.row=a,i.col=r,i.position.x=r*g.WIDTH,i.position.z=a*g.WIDTH,e.add(i)}e.position.set(-t.offset.col,0,-t.offset.row),n.position.set(-t.offset.col,g.HEIGHT,-t.offset.row)},t.move=function(t,e,o){var a=new x(o);return a.position.x=e*g.WIDTH,a.position.z=t*g.WIDTH,a.name="".concat(t,"-").concat(e),n.add(a),a.move()},t.flip=function(t){var e=[];if(t)for(var o in t){var a=t[o],r=a.row,i=a.col,c=n.getObjectByName("".concat(r,"-").concat(i));e.push(c.flip(500*parseInt(o)))}return Promise.all(e)},t.init()};A.prototype=Object.create(E["g"].prototype),A.prototype.constructor=A;var k=A,L=n("53ca"),M=n("d4ec"),_=n("bee2"),G=function(){function t(){Object(M["a"])(this,t),this._table=[[[0,0],[0,7],[7,0],[7,7]],[[2,2],[2,5],[5,2],[5,5]],[[3,2],[3,5],[4,2],[4,5],[2,3],[2,4],[5,3],[5,4]],[[2,0],[2,7],[5,0],[5,7],[0,2],[0,5],[7,2],[7,5]],[[3,0],[3,7],[4,0],[4,7],[0,3],[0,4],[7,3],[7,4]],[[2,1],[2,6],[5,1],[5,6],[1,2],[1,5],[6,2],[6,5]],[[3,1],[3,6],[4,1],[4,6],[1,3],[1,4],[6,3],[6,4]],[[1,1],[1,6],[6,1],[6,6]],[[1,0],[1,7],[6,0],[6,7],[0,1],[0,6],[7,1],[7,6]]]}return Object(_["a"])(t,[{key:"select",value:function(t){if(!(t&&t.length>0))return!1;var e,n=Object(y["a"])(this._table);try{for(n.s();!(e=n.n()).done;){var o=e.value;o.sort((function(){return.5-Math.random()}));var a,r=Object(y["a"])(o);try{var i=function(){var e=a.value;if(t.findIndex((function(t){return t[0]===e[0]&&t[1]===e[1]}))>-1)return{v:e}};for(r.s();!(a=r.n()).done;){var c=i();if("object"===Object(L["a"])(c))return c.v}}catch(l){r.e(l)}finally{r.f()}}}catch(l){n.e(l)}finally{n.f()}}}]),t}(),W=G,N=function t(e){var n=this,o=null,a=0;n.init=function(t){o=new W,a=parseInt(t)},n.getColor=function(){return C.CHESS.WHITE},n.think=function(e){var r,i;if(1===a||2===a){var c=o.select(e),l=Object(T["a"])(c,2);r=l[0],i=l[1]}else{var u=Object(T["a"])(e[parseInt(Math.random()*e.length)],2);r=u[0],i=u[1]}var s={col:r,row:i,color:n.getColor()};setTimeout((function(){var e={type:t.EVENT.MOVE,data:s};n.dispatchEvent(e)}),1e3)},n.init(e)};N.EVENT={MOVE:"aiPlayerMove"},N.prototype=Object.create(E["d"].prototype),N.prototype.constructor=N;var V=N,P={RUNNING:"running",MODEL_LOADED:"modeLoaded",PERSON_FAIL:"personFail",GAME_INIT:"gameInit",GAME_START:"gameStart",GAME_STEP:"gameStep",GAME_OVER:"gameOver"},R=function(t){var e=this,n=0,o=0,a=0,r=0,i=null,c=60,l=null,u=null,s=null,f=null,p=null,d=null,v={},b=null,h=null,w=!1;function S(){n=i.offsetLeft,o=i.offsetTop,a=i.clientWidth,r=i.clientHeight}function j(){b=b===C.CHESS.BLACK?C.CHESS.WHITE:C.CHESS.BLACK;var t=d.getLegal(b);t&&t.length>0?"player"===v[b]?w=!0:"ai"===v[b]&&h.think(t):j()}function g(t){return T.apply(this,arguments)}function T(){return T=Object(m["a"])(regeneratorRuntime.mark((function t(n){var o,a,r,i,c,l,u,s,p,d;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:o=n.data,a=o.count,r=o.moves,i=Object(y["a"])(r),t.prev=2,i.s();case 4:if((c=i.n()).done){t.next=11;break}return l=c.value,u=l.row,s=l.col,p=l.color,t.next=9,f.move(u,s,p);case 9:t.next=4;break;case 11:t.next=16;break;case 13:t.prev=13,t.t0=t["catch"](2),i.e(t.t0);case 16:return t.prev=16,i.f(),t.finish(16);case 19:w=!0,d={type:P.GAME_STEP,data:a},e.dispatchEvent(d);case 22:case"end":return t.stop()}}),t,null,[[2,13,16,19]])}))),T.apply(this,arguments)}function H(t){if(0===t.space||0===t.black||0===t.white){var n={type:P.GAME_OVER,data:t};return e.dispatchEvent(n),!1}return!0}function I(t){w=!1;var n=t.data,o=n.row,a=n.col,r=n.color,i=n.flips,c=n.count;f.move(o,a,r).then((function(){f.flip(i).then((function(){var t={type:P.GAME_STEP,data:c};e.dispatchEvent(t),H(c)&&j()}))}))}function x(t){var e=t.data,n=e.row,o=e.col,a=e.color;d.move(n,o,a)}function A(t){requestAnimationFrame(A),O["c"].update(t),s.render(u,l)}e.init=function(t){i=t,S(),u=new E["j"],u.background=new E["b"]("skyblue"),l=new E["h"](75,a/r,1,1e3),l.position.set(0,0,c),s=new E["n"]({canvas:t,antialias:!0}),p=new E["i"],d=new C,d.addEventListener(C.EVENT.START,g),d.addEventListener(C.EVENT.MOVE,I),f=new k,f.pave(d.getData()),u.add(f),l.lookAt(f.position),window.addEventListener("resize",S),A(0)},e.start=function(t){S();var e=new E["m"];e.copy(l.position);var n=new E["m"],o=new O["b"](e).to({x:0,y:c,z:0});o.onUpdate((function(t){n.copy(t),n.setLength(c),l.position.copy(n),l.lookAt(f.position)})),o.onComplete((function(){10===parseInt(t)?v[C.CHESS.WHITE]="player":(h=new V(t),h.addEventListener(V.EVENT.MOVE,x),v[C.CHESS.WHITE]="ai"),v[C.CHESS.BLACK]="player",b=C.CHESS.BLACK,d.start()})),o.start()},e.click=function(t){if(w){var e=new E["l"],i=t.x-n,c=t.y-o;e.x=i/a*2-1,e.y=-c/r*2+1,p.setFromCamera(e,l);var u=f.hit(p);if(u){var s=u.object,v=s.row,h=s.col;d.move(v,h,b)}}},e.init(t)};Object.assign(R.prototype,E["d"].prototype),R.prototype.constructor=R;var B={name:"Game",data:function(){return{isStartPanelShow:!0,difficulty:0,msg:"",black:0,white:0}},__reversi:null,mounted:function(){this.__reversi=new R(this.$refs["game"]),this.__reversi.addEventListener(P.GAME_STEP,this.onGameStep),this.__reversi.addEventListener(P.GAME_OVER,this.onGameOver)},methods:{onGameClick:function(t){this.__reversi.click(t)},onGameStart:function(t){this.isStartPanelShow=!1,this.__reversi.start(this.difficulty)},onGameOver:function(t){var e=t.data,n=e.black,o=e.white;e.space;this.msg=n>o?"黑棋胜":o>n?"白棋胜":"平局"},onGameStep:function(t){this.black=t.data.black,this.white=t.data.white}}};n("f4ac");B.render=h,B.__scopeId="data-v-6339fa50";var D=B,z={name:"App",components:{Game:D}};(function(t,e){var n,o,a,r=document,i=window,c=r.documentElement;function l(){var n=c.getBoundingClientRect().width;e||(e=540),n>e&&(n=e);var r=100*n/t;if(a="html{font-size:"+r+"px !important}",o=document.getElementById("rootsize")||document.createElement("style"),document.getElementById("rootsize")||(document.getElementsByTagName("head")[0].appendChild(o),o.id="rootsize"),o.styleSheet)o.styleSheet.disabled||(o.styleSheet.cssText=a);else try{o.innerHTML=a}catch(i){o.innerText=a}c.style.fontSize=r+"px"}l(),i.addEventListener("resize",(function(){clearTimeout(n),n=setTimeout(l,300)}),!1),i.addEventListener("pageshow",(function(t){t.persisted&&(clearTimeout(n),n=setTimeout(l,300))}),!1),"complete"===r.readyState?r.body.style.fontSize="16px":r.addEventListener("DOMContentLoaded",(function(t){r.body.style.fontSize="16px"}),!1)})(750,750);n("b7f0");z.render=a;var K=z;Object(o["a"])(K).mount("#app")},"5a81":function(t,e,n){var o=n("8bce");"string"===typeof o&&(o=[[t.i,o,""]]),o.locals&&(t.exports=o.locals);var a=n("499e").default;a("32a02423",o,!0,{sourceMap:!1,shadowMode:!1})},"6e99":function(t,e,n){var o=n("24fb");e=o(!1),e.push([t.i,"#app{font-family:Avenir,Helvetica,Arial,sans-serif;-webkit-font-smoothing:antialiased;-moz-osx-font-smoothing:grayscale;text-align:center;color:#2c3e50}",""]),t.exports=e},"8bce":function(t,e,n){var o=n("24fb");e=o(!1),e.push([t.i,"h3[data-v-6339fa50]{margin:40px 0 0}ul[data-v-6339fa50]{list-style-type:none;padding:0}li[data-v-6339fa50]{display:inline-block;margin:0 10px}a[data-v-6339fa50]{color:#42b983}.start-panel[data-v-6339fa50]{width:5rem;position:absolute;left:1.25rem;top:1.75rem;z-index:1;border-radius:.1rem;background-color:#fff}.start-panel .start-wrap[data-v-6339fa50]{margin:.3rem 1.5rem .7rem}.start-panel .start-wrap p[data-v-6339fa50]{text-align:left}",""]),t.exports=e},b7f0:function(t,e,n){"use strict";n("d4c8")},d4c8:function(t,e,n){var o=n("6e99");"string"===typeof o&&(o=[[t.i,o,""]]),o.locals&&(t.exports=o.locals);var a=n("499e").default;a("dee7462c",o,!0,{sourceMap:!1,shadowMode:!1})},f4ac:function(t,e,n){"use strict";n("5a81")}});
//# sourceMappingURL=app.714a842a.js.map