{"version":3,"sources":["webpack:///webpack/bootstrap","webpack:///./src/components/reversi/textures/square.jpg","webpack:///./src/app.vue","webpack:///./src/components/game.vue","webpack:///./src/components/reversi/square.js","webpack:///./src/components/reversi/engine.js","webpack:///./src/components/reversi/piece.js","webpack:///./src/components/reversi/board.js","webpack:///./src/components/reversi/roxanne.js","webpack:///./src/components/reversi/ai-player.js","webpack:///./src/components/reversi/main.js","webpack:///./src/components/game.vue?15c7","webpack:///./src/app.vue?1c87","webpack:///./src/main.js","webpack:///./src/app.vue?1bdf","webpack:///./src/app.vue?7575","webpack:///./src/components/game.vue?e476","webpack:///./src/components/game.vue?54a6","webpack:///./src/app.vue?ca1a","webpack:///./src/components/game.vue?567b"],"names":["webpackJsonpCallback","data","moduleId","chunkId","chunkIds","moreModules","executeModules","i","resolves","length","Object","prototype","hasOwnProperty","call","installedChunks","push","modules","parentJsonpFunction","shift","deferredModules","apply","checkDeferredModules","result","deferredModule","fulfilled","j","depId","splice","__webpack_require__","s","installedModules","exports","module","l","m","c","d","name","getter","o","defineProperty","enumerable","get","r","Symbol","toStringTag","value","t","mode","__esModule","ns","create","key","bind","n","object","property","p","jsonpArray","window","oldJsonpFunction","slice","msg","class","ref","width","height","onGameClick","black","white","Square","_this","this","row","NaN","col","init","g","BoxGeometry","WIDTH","HEIGHT","TextureLoader","load","image","MeshBasicMaterial","color","map","Mesh","blink","position","y","constructor","Engine","_data","getFilp","isValid","arr","opColor","CHESS","BLACK","WHITE","direction","coord","xdirection","ydirection","x","parseInt","ROW","COL","getCount","counter","reset","start","obj","e","type","EVENT","START","dispatchEvent","getData","move","flips","count","MOVE","getLegal","nears","dx","dy","NONE","findIndex","k","GAME_OVER","FLIP","assign","EventDispatcher","Piece","param","geometry","CylinderGeometry","RADIUS","SEGMENT","materials","rotation","Math","PI","Promise","resolve","Tween","to","easing","Easing","Quadratic","In","onUpdate","onComplete","flip","delay","initX","up","down","spin","chain","Board","__bg","__chess","offset","Object3D","add","hit","raycaster","intersects","intersectObjects","children","ret","pave","clear","square","z","set","piece","list","getObjectByName","all","Roxanne","_table","moves","sort","random","AIPlayer","_roxnane","getColor","think","select","setTimeout","RUNNING","MODEL_LOADED","PERSON_FAIL","GAME_INIT","GAME_START","GAME_STEP","main","container","__camera","__scene","__renderer","__board","_raycaster","_engine","_situation","_operantPlayer","_ai","_enable","switchOperantPlayer","onChessStart","onChessMove","then","event","onAIMove","animate","time","requestAnimationFrame","TWEEN","update","render","canvas","Scene","background","Color","PerspectiveCamera","WebGLRenderer","setSize","Raycaster","addEventListener","lookAt","click","vec","Vector2","setFromCamera","props","String","__reversi","mounted","$refs","onGameStep","methods","offsetLeft","offsetTop","__scopeId","components","Game","createApp","App","mount","___CSS_LOADER_API_IMPORT___","content","locals","default"],"mappings":"aACE,SAASA,EAAqBC,GAQ7B,IAPA,IAMIC,EAAUC,EANVC,EAAWH,EAAK,GAChBI,EAAcJ,EAAK,GACnBK,EAAiBL,EAAK,GAIHM,EAAI,EAAGC,EAAW,GACpCD,EAAIH,EAASK,OAAQF,IACzBJ,EAAUC,EAASG,GAChBG,OAAOC,UAAUC,eAAeC,KAAKC,EAAiBX,IAAYW,EAAgBX,IACpFK,EAASO,KAAKD,EAAgBX,GAAS,IAExCW,EAAgBX,GAAW,EAE5B,IAAID,KAAYG,EACZK,OAAOC,UAAUC,eAAeC,KAAKR,EAAaH,KACpDc,EAAQd,GAAYG,EAAYH,IAG/Be,GAAqBA,EAAoBhB,GAE5C,MAAMO,EAASC,OACdD,EAASU,OAATV,GAOD,OAHAW,EAAgBJ,KAAKK,MAAMD,EAAiBb,GAAkB,IAGvDe,IAER,SAASA,IAER,IADA,IAAIC,EACIf,EAAI,EAAGA,EAAIY,EAAgBV,OAAQF,IAAK,CAG/C,IAFA,IAAIgB,EAAiBJ,EAAgBZ,GACjCiB,GAAY,EACRC,EAAI,EAAGA,EAAIF,EAAed,OAAQgB,IAAK,CAC9C,IAAIC,EAAQH,EAAeE,GACG,IAA3BX,EAAgBY,KAAcF,GAAY,GAE3CA,IACFL,EAAgBQ,OAAOpB,IAAK,GAC5Be,EAASM,EAAoBA,EAAoBC,EAAIN,EAAe,KAItE,OAAOD,EAIR,IAAIQ,EAAmB,GAKnBhB,EAAkB,CACrB,IAAO,GAGJK,EAAkB,GAGtB,SAASS,EAAoB1B,GAG5B,GAAG4B,EAAiB5B,GACnB,OAAO4B,EAAiB5B,GAAU6B,QAGnC,IAAIC,EAASF,EAAiB5B,GAAY,CACzCK,EAAGL,EACH+B,GAAG,EACHF,QAAS,IAUV,OANAf,EAAQd,GAAUW,KAAKmB,EAAOD,QAASC,EAAQA,EAAOD,QAASH,GAG/DI,EAAOC,GAAI,EAGJD,EAAOD,QAKfH,EAAoBM,EAAIlB,EAGxBY,EAAoBO,EAAIL,EAGxBF,EAAoBQ,EAAI,SAASL,EAASM,EAAMC,GAC3CV,EAAoBW,EAAER,EAASM,IAClC3B,OAAO8B,eAAeT,EAASM,EAAM,CAAEI,YAAY,EAAMC,IAAKJ,KAKhEV,EAAoBe,EAAI,SAASZ,GACX,qBAAXa,QAA0BA,OAAOC,aAC1CnC,OAAO8B,eAAeT,EAASa,OAAOC,YAAa,CAAEC,MAAO,WAE7DpC,OAAO8B,eAAeT,EAAS,aAAc,CAAEe,OAAO,KAQvDlB,EAAoBmB,EAAI,SAASD,EAAOE,GAEvC,GADU,EAAPA,IAAUF,EAAQlB,EAAoBkB,IAC/B,EAAPE,EAAU,OAAOF,EACpB,GAAW,EAAPE,GAA8B,kBAAVF,GAAsBA,GAASA,EAAMG,WAAY,OAAOH,EAChF,IAAII,EAAKxC,OAAOyC,OAAO,MAGvB,GAFAvB,EAAoBe,EAAEO,GACtBxC,OAAO8B,eAAeU,EAAI,UAAW,CAAET,YAAY,EAAMK,MAAOA,IACtD,EAAPE,GAA4B,iBAATF,EAAmB,IAAI,IAAIM,KAAON,EAAOlB,EAAoBQ,EAAEc,EAAIE,EAAK,SAASA,GAAO,OAAON,EAAMM,IAAQC,KAAK,KAAMD,IAC9I,OAAOF,GAIRtB,EAAoB0B,EAAI,SAAStB,GAChC,IAAIM,EAASN,GAAUA,EAAOiB,WAC7B,WAAwB,OAAOjB,EAAO,YACtC,WAA8B,OAAOA,GAEtC,OADAJ,EAAoBQ,EAAEE,EAAQ,IAAKA,GAC5BA,GAIRV,EAAoBW,EAAI,SAASgB,EAAQC,GAAY,OAAO9C,OAAOC,UAAUC,eAAeC,KAAK0C,EAAQC,IAGzG5B,EAAoB6B,EAAI,GAExB,IAAIC,EAAaC,OAAO,gBAAkBA,OAAO,iBAAmB,GAChEC,EAAmBF,EAAW3C,KAAKsC,KAAKK,GAC5CA,EAAW3C,KAAOf,EAClB0D,EAAaA,EAAWG,QACxB,IAAI,IAAItD,EAAI,EAAGA,EAAImD,EAAWjD,OAAQF,IAAKP,EAAqB0D,EAAWnD,IAC3E,IAAIU,EAAsB2C,EAI1BzC,EAAgBJ,KAAK,CAAC,EAAE,kBAEjBM,K,gECvJTW,EAAOD,QAAU,IAA0B,2B,gLCCzC,eAAwC,GAAlC+B,IAAI,+B,iFCALC,MAAM,Q,EACT,eAAkB,WAAb,WAAO,G,EAIJ,eAAgB,YAAV,OAAG,G,EACT,eAAgB,YAAV,OAAG,G,wEANnB,eASM,MATN,EASM,CARJ,EACA,eAAqF,YAAhF,eAA0E,UAAlEC,IAAI,OAAOC,MAAM,MAAMC,OAAO,MAAO,QAAK,8BAAE,EAAAC,aAAA,EAAAA,YAAA,sB,YACzD,eAKM,YAJJ,eAGK,WAFH,eAA+C,WAA3C,EAAgB,eAAsB,2BAAd,EAAAC,OAAK,KACjC,eAA+C,WAA3C,EAAgB,eAAsB,2BAAd,EAAAC,OAAK,c,+ICFnCC,EAAS,SAATA,IACJ,IAAMC,EAAQC,KACdD,EAAME,IAAMC,IACZH,EAAMI,IAAMD,IAIbH,EAAMK,KAAO,WACV,IAAMC,EAAI,IAAIC,OAAYR,EAAOS,MAAOT,EAAOU,OAAQV,EAAOS,OACxDhC,GAAI,IAAIkC,QAAgBC,KAAKC,KAC7BjD,EAAI,IAAIkD,OAAmB,CAAEC,MAAO,SAAUC,IAAKvC,IACzDwC,OAAK1E,KAAK0D,EAAOM,EAAG3C,IAEtBqC,EAAMiB,MAAQ,WACZjB,EAAMkB,SAASC,GAAK,GAEvBnB,EAAMK,QAGPN,EAAOS,MAAQ,GACfT,EAAOU,OAAS,EAEhBV,EAAO3D,UAAYD,OAAOyC,OAAQoC,OAAK5E,WACvC2D,EAAO3D,UAAUgF,YAAcrB,EAChBA,Q,wBCzBTsB,EAAS,SAATA,IACJ,IAAMrB,EAAQC,KACVqB,EAAQ,KAiEZ,SAASC,EAAQrB,EAAKE,EAAKU,GACzB,GAAwB,IAApBQ,EAAMpB,GAAKE,GACb,OAAO,EAET,IAAKoB,EAAQpB,EAAKF,GAChB,OAAO,EAEToB,EAAMpB,GAAKE,GAAOU,EAIlB,IAHA,IAAMW,EAAM,GACNC,EAAUZ,IAAUO,EAAOM,MAAMC,MAAQP,EAAOM,MAAME,MAAQR,EAAOM,MAAMC,MAC3EE,EAAY,CAAC,CAAC,EAAG,GAAI,CAAC,EAAG,GAAI,CAAC,EAAG,GAAI,CAAC,GAAI,GAAI,CAAC,GAAI,GAAI,EAAE,GAAI,GAAI,EAAE,EAAG,GAAI,EAAE,EAAG,IACrF,MAAmBA,EAAnB,eAA8B,CAA1B,IAAMC,EAAK,KAAe,iBACOA,EADP,GACpBC,EADoB,KACRC,EADQ,KAExBC,EAAIC,SAAS/B,GACbe,EAAIgB,SAASjC,GAGjB,GAFAgC,GAAKF,EACLb,GAAKc,EACFT,EAAQL,EAAGe,IAAMZ,EAAMH,GAAGe,KAAOR,EAClC,GAGE,GAFAQ,GAAKF,EACLb,GAAKc,GACDT,EAAQL,EAAGe,GAAI,YACbZ,EAAMH,GAAGe,KAAOR,GAE1B,GAAIF,EAAQL,EAAGe,IACZZ,EAAMH,GAAGe,KAAOpB,EACjB,MAAOU,EAAQL,EAAGe,GAAI,CAGpB,GAFAA,GAAKF,EACLb,GAAKc,EACDd,GAAKgB,SAASjC,IAAQgC,GAAKC,SAAS/B,GAAM,MAC9CqB,EAAIjF,KAAK,CAAC4D,IAAI8B,EAAGhC,IAAIiB,KAQ3B,OADAG,EAAMpB,GAAKE,GAAO,EACA,IAAfqB,EAAIvF,QACAuF,EAsCT,SAASD,EAAStB,EAAKE,GACrB,OAAQF,GAAO,GAAKA,GAAOmB,EAAOe,IAAM,GAAKhC,GAAO,GAAKA,GAAOiB,EAAOgB,IAAM,EAK/E,SAASC,IACP,IADkB,EACZC,EAAU,CACd1C,MAAO,EACPC,MAAO,GAHS,iBAKDwB,GALC,IAKlB,2BAAwB,OAAdpB,EAAc,yBACLA,GADK,IACtB,2BAAsB,KAAZE,EAAY,QACjBA,IAAQiB,EAAOM,MAAMC,MACtBW,EAAQ1C,QACAO,IAAQiB,EAAOM,MAAME,OAC7BU,EAAQzC,SALU,gCALN,8BAclB,OAAOyC,EA7JTvC,EAAMK,KAAO,WACXL,EAAMwC,SAKRxC,EAAMwC,MAAQ,WACZlB,EAAQ,GACR,IAAI,IAAI3D,EAAI,EAAGA,EAAI0D,EAAOe,IAAKzE,IAAK,CAElC,IADA,IAAM8D,EAAM,GACJ1C,EAAI,EAAGA,EAAIsC,EAAOgB,IAAKtD,IAC7B0C,EAAIjF,KAAK,GAEX8E,EAAM9E,KAAKiF,KAMfzB,EAAMyC,MAAQ,WACZ,IAAMhB,EAAM,GACZA,EAAIjF,KAAK,CAAC0D,IAAK,EAAGE,IAAK,EAAGU,MAAOO,EAAOM,MAAMC,QAC9CH,EAAIjF,KAAK,CAAC0D,IAAK,EAAGE,IAAK,EAAGU,MAAOO,EAAOM,MAAME,QAC9CJ,EAAIjF,KAAK,CAAC0D,IAAK,EAAGE,IAAK,EAAGU,MAAOO,EAAOM,MAAMC,QAC9CH,EAAIjF,KAAK,CAAC0D,IAAK,EAAGE,IAAK,EAAGU,MAAOO,EAAOM,MAAME,QAC9C,cAAiBJ,EAAjB,eAAsB,CAAlB,IAAMiB,EAAG,KACHxC,EAAoBwC,EAApBxC,IAAKE,EAAesC,EAAftC,IAAKU,EAAU4B,EAAV5B,MAClBQ,EAAMpB,GAAKE,GAAOU,EAEVO,EAAOM,MAAMC,MACvB,IAAMe,EAAI,CAAEC,KAAMvB,EAAOwB,MAAMC,MAAOpH,KAAM+F,GAC5CzB,EAAM+C,cAAcJ,IAKtB3C,EAAMgD,QAAU,WACd,OAAO1B,GAQTtB,EAAMiD,KAAO,SAAC/C,EAAKE,EAAKU,GACtB,IAAIoC,EAAS3B,EAAQrB,EAAKE,EAAKU,GAC/B,GAAGoC,EAAH,CAAU,uBACSA,GADT,IACR,2BAAwB,KAAdR,EAAc,QACtBpB,EAAMoB,EAAIxC,KAAKwC,EAAItC,KAAOU,GAFpB,8BAOVQ,EAAMpB,GAAKE,GAAOU,EAClB,IAAMqC,EAAQb,IACR5G,EAAO,CAAEwE,MAAKE,MAAKU,QAAOoC,QAAOC,SACjCR,EAAI,CAAEC,KAAMvB,EAAOwB,MAAMO,KAAM1H,QACrCsE,EAAM+C,cAAcJ,KA+CtB3C,EAAMqD,SAAW,SAACvC,GAChB,IAAMgB,EAAY,CAAC,EAAE,EAAG,GAAI,EAAE,EAAG,GAAI,CAAC,EAAG,GAAI,CAAC,EAAG,GAAI,CAAC,EAAG,GAAI,CAAC,GAAI,GAAI,CAAC,GAAI,GAAI,EAAE,GAAI,IAC/EJ,EAAUZ,IAAUO,EAAOM,MAAMC,MAAQP,EAAOM,MAAME,MAAQR,EAAOM,MAAMC,MAC3E0B,EAAQ,GACd,IAAI,IAAM3F,KAAK2D,EACb,IAAI,IAAMvC,KAAKuC,EAAM3D,GACnB,GAAG2D,EAAM3D,GAAGoB,KAAO2C,EAAS,wBACPI,GADO,yBAChBC,EADgB,yBAELA,EAFK,GAEhBwB,EAFgB,KAEZC,EAFY,KAGpBtB,EAAIC,SAASpD,GAAKwE,EAClBpC,EAAIgB,SAASxE,GAAK6F,EACnBhC,EAAQL,EAAGe,IAAMZ,EAAMH,GAAGe,KAAMb,EAAOM,MAAM8B,OACO,IAApDH,EAAMI,WAAU,SAAAC,GAAC,OAAIA,EAAE,KAAOzB,GAAKyB,EAAE,KAAOxC,MAC7CmC,EAAM9G,KAAK,CAAC0F,EAAGf,KANnB,2BAA8B,IADJ,+BAchC,IADA,IAAMM,EAAM,GACZ,MAAmB6B,EAAnB,eAA0B,CAAtB,IAAMvB,EAAK,KACVR,EAAQQ,EAAM,GAAIA,EAAM,GAAIjB,IAC7BW,EAAIjF,KAAKuF,GAGb,OAAON,GA6BTzB,EAAMK,QAERgB,EAAOe,IAAM,EACbf,EAAOgB,IAAM,EACbhB,EAAOM,MAAQ,CACb8B,KAAM,EACN7B,MAAO,EACPC,MAAO,GAETR,EAAOwB,MAAQ,CACbC,MAAO,YACPc,UAAW,WACXR,KAAM,YACNS,KAAM,aAGR1H,OAAO2H,OAAQzC,EAAOjF,UAAW2H,OAAgB3H,WACjDiF,EAAOjF,UAAUgF,YAAcC,EAChBA,QCtLT2C,EAAQ,SAARA,EAAiBC,GACrB,IAAMjE,EAAQC,KAIfD,EAAMK,KAAO,SAACS,GACX,IAAMoD,EAAW,IAAIC,OAAiBH,EAAMI,OAAQJ,EAAMI,OAAQJ,EAAMxD,MAAOwD,EAAMK,SAC/EC,EAAY,CAChB,IAAIzD,OAAmB,CAAEC,MAAO,QAChC,IAAID,OAAmB,CAAEC,MAAO,UAChC,IAAID,OAAmB,CAAEC,MAAO,WAElCE,OAAK1E,KAAK0D,EAAOkE,EAAUI,GACxBxD,GAASO,EAAOM,MAAME,QACvB7B,EAAMuE,SAASrC,EAAIsC,KAAKC,KAM5BzE,EAAMiD,KAAO,WACX,OAAO,IAAIyB,SAAQ,SAACC,GAClB,IAAI5C,EAAQ,CAAEZ,EAAG,IACX3C,EAAI,IAAIoG,OAAM7C,GAAO8C,GAAG,CAAC1D,EAAE,GAAI,KAAK2D,OAAOC,OAAOC,UAAUC,IAClEzG,EAAE0G,UAAS,SAACvC,GAAO3C,EAAMkB,SAASC,EAAIwB,EAAExB,KACxC3C,EAAE2G,YAAW,SAAAxC,GAAMgC,EAAQhC,MAC3BnE,EAAEiE,YAONzC,EAAMoF,KAAO,WAAe,IAAdC,EAAc,uDAAN,EACpB,OAAO,IAAIX,SAAQ,SAACC,GAClB,IAAIJ,EAAW,CAAErC,EAAG,GACdoD,EAAQtF,EAAMuE,SAASrC,EACzBH,EAAQ,CAAEZ,EAAG,GACXoE,EAAK,IAAIX,OAAM7C,GAAO8C,GAAG,CAAC1D,EAAG,IAAK,KAAK+D,UAAS,SAACvC,GAAO3C,EAAMkB,SAASC,EAAIwB,EAAExB,KAC7EqE,EAAO,IAAIZ,OAAM7C,GAAO8C,GAAG,CAAC1D,EAAG,GAAI,KAAK+D,UAAS,SAACvC,GAAO3C,EAAMkB,SAASC,EAAIwB,EAAExB,KAC9EsE,EAAO,IAAIb,OAAML,GAAUM,GAAG,CAAC3C,EAAGsC,KAAKC,IAAK,KAAKS,UAAS,SAACvC,GAAO3C,EAAMuE,SAASrC,EAAIoD,EAAQ3C,EAAET,KACrGuD,EAAKN,YAAW,SAAAxC,GAAMgC,EAAQhC,MAC9B8C,EAAKC,MAAMF,GACXD,EAAGG,MAAMD,GACTF,EAAGF,MAAMA,GACTE,EAAG9C,YAGRzC,EAAMK,KAAK4D,IAGZD,EAAMI,OAAS,EACfJ,EAAMvD,OAAS,EACfuD,EAAMK,QAAU,GAEhBL,EAAM5H,UAAYD,OAAOyC,OAAQoC,OAAK5E,WACtC4H,EAAM5H,UAAUgF,YAAc4C,EACfA,QCxDT2B,EAAQ,WACZ,IAAM3F,EAAQC,KACV2F,EAAO,KACTC,EAAU,KACZ7F,EAAM8F,OAAS,CACb5F,IAAK,EACLE,IAAK,GAKRJ,EAAMK,KAAO,WACV0F,OAASzJ,KAAK0D,GACd4F,EAAO,IAAIG,OACXF,EAAU,IAAIE,OACd/F,EAAMgG,IAAIJ,EAAMC,IAMlB7F,EAAMiG,IAAM,SAAAC,GACV,IAAMC,EAAaD,EAAUE,iBAAkBR,EAAKS,UAChDC,EAAM,KAIV,OAHGH,EAAWjK,OAAS,IACrBoK,EAAMH,EAAW,IAEZG,GAKTtG,EAAMuG,KAAO,SAAC7K,GAIZ,IAAM,IAAMiC,KAHZiI,EAAKY,QACLxG,EAAM8F,OAAO5F,IAAMxE,EAAKQ,OAAS,EAAI6D,EAAOS,MAAQT,EAAOS,MAAQ,EACnER,EAAM8F,OAAO1F,IAAMJ,EAAM8F,OAAO5F,IACfxE,EACf,IAAM,IAAMqD,KAAKrD,EAAKiC,GAAK,CACzB,IAAM8I,EAAS,IAAI1G,EACnB0G,EAAOvG,IAAMvC,EACb8I,EAAOrG,IAAMrB,EACb0H,EAAOvF,SAASgB,EAAInD,EAAIgB,EAAOS,MAC/BiG,EAAOvF,SAASwF,EAAI/I,EAAIoC,EAAOS,MAC/BoF,EAAKI,IAAIS,GAGbb,EAAK1E,SAASyF,KAAK3G,EAAM8F,OAAO1F,IAAK,GAAIJ,EAAM8F,OAAO5F,KACtD2F,EAAQ3E,SAASyF,KAAK3G,EAAM8F,OAAO1F,IAAKL,EAAOU,QAAST,EAAM8F,OAAO5F,MAQvEF,EAAMiD,KAAO,SAAC/C,EAAKE,EAAKU,GACtB,IAAM8F,EAAQ,IAAI5C,EAAMlD,GAKxB,OAJA8F,EAAM1F,SAASgB,EAAI9B,EAAML,EAAOS,MAChCoG,EAAM1F,SAASwF,EAAIxG,EAAMH,EAAOS,MAChCoG,EAAM9I,KAAN,UAAgBoC,EAAhB,YAAuBE,GACvByF,EAAQG,IAAIY,GACLA,EAAM3D,QAMfjD,EAAMoF,KAAO,SAAC3D,GACZ,IAAMoF,EAAO,GACb,GAAIpF,EACF,IAAI,IAAMkC,KAAKlC,EAAK,OACGA,EAAIkC,GAAjBzD,EADU,EACVA,IAAKE,EADK,EACLA,IACPwG,EAAQf,EAAQiB,gBAAR,UAA2B5G,EAA3B,YAAkCE,IAChDyG,EAAKrK,KAAKoK,EAAMxB,KAAmB,IAAdjD,SAASwB,KAGlC,OAAOe,QAAQqC,IAAIF,IAEtB7G,EAAMK,QAGPsF,EAAMvJ,UAAYD,OAAOyC,OAAQmH,OAAS3J,WAC1CuJ,EAAMvJ,UAAUgF,YAAcuE,EACfA,Q,oCCtFTqB,E,WACJ,aAAc,uBACZ/G,KAAKgH,OAAS,CACZ,CAAE,CAAC,EAAG,GAAI,CAAC,EAAG,GAAI,CAAC,EAAG,GAAI,CAAC,EAAG,IAC9B,CAAE,CAAC,EAAG,GAAI,CAAC,EAAG,GAAI,CAAC,EAAG,GAAI,CAAC,EAAG,IAC9B,CAAE,CAAC,EAAG,GAAI,CAAC,EAAG,GAAI,CAAC,EAAG,GAAI,CAAC,EAAG,GAAI,CAAC,EAAG,GAAI,CAAC,EAAG,GAAI,CAAC,EAAG,GAAI,CAAC,EAAG,IAC9D,CAAE,CAAC,EAAG,GAAI,CAAC,EAAG,GAAI,CAAC,EAAG,GAAI,CAAC,EAAG,GAAI,CAAC,EAAG,GAAI,CAAC,EAAG,GAAI,CAAC,EAAG,GAAI,CAAC,EAAG,IAC9D,CAAE,CAAC,EAAG,GAAI,CAAC,EAAG,GAAI,CAAC,EAAG,GAAI,CAAC,EAAG,GAAI,CAAC,EAAG,GAAI,CAAC,EAAG,GAAI,CAAC,EAAG,GAAI,CAAC,EAAG,IAC9D,CAAE,CAAC,EAAG,GAAI,CAAC,EAAG,GAAI,CAAC,EAAG,GAAI,CAAC,EAAG,GAAI,CAAC,EAAG,GAAI,CAAC,EAAG,GAAI,CAAC,EAAG,GAAI,CAAC,EAAG,IAC9D,CAAE,CAAC,EAAG,GAAI,CAAC,EAAG,GAAI,CAAC,EAAG,GAAI,CAAC,EAAG,GAAI,CAAC,EAAG,GAAI,CAAC,EAAG,GAAI,CAAC,EAAG,GAAI,CAAC,EAAG,IAC9D,CAAE,CAAC,EAAG,GAAI,CAAC,EAAG,GAAI,CAAC,EAAG,GAAI,CAAC,EAAG,IAC9B,CAAE,CAAC,EAAG,GAAI,CAAC,EAAG,GAAI,CAAC,EAAG,GAAI,CAAC,EAAG,GAAI,CAAC,EAAG,GAAI,CAAC,EAAG,GAAI,CAAC,EAAG,GAAI,CAAC,EAAG,K,sDAG3DxF,GACL,KAAIA,GAAOA,EAAIvF,OAAS,GAUtB,OAAO,EAVkB,uBACN+D,KAAKgH,QADC,IACzB,2BAAgC,KAAtBC,EAAsB,QAC9BA,EAAMC,MAAK,iBAAM,GAAM3C,KAAK4C,YADE,uBAEZF,GAFY,yBAEpBjE,EAFoB,QAG5B,GAAGxB,EAAIiC,WAAU,SAAA3E,GAAC,OAAIA,EAAE,KAAOkE,EAAK,IAAMlE,EAAE,KAAOkE,EAAK,OAAO,EAC7D,SAAOA,IAFX,2BAAyB,uDAFK,gCADP,mC,KAchB+D,IC1BTK,EAAW,SAAXA,IACJ,IAAMrH,EAAQC,KACVqH,EAAW,KAIhBtH,EAAMK,KAAO,WACViH,EAAW,IAAIN,GAKjBhH,EAAMuH,SAAW,WACf,OAAOlG,EAAOM,MAAME,OAMtB7B,EAAMwH,MAAQ,SAAC/F,GAAQ,MAEA6F,EAASG,OAAOhG,GAFhB,sBAEbrB,EAFa,KAERF,EAFQ,KAGfxE,EAAO,CAAE0E,MAAKF,MAAKY,MAAOd,EAAMuH,YACtCG,YAAW,WACT,IAAM/E,EAAI,CAAEC,KAAMyE,EAASxE,MAAMO,KAAM1H,QACvCsE,EAAM+C,cAAcJ,KACnB,MAEN3C,EAAMK,QAGPgH,EAASxE,MAAQ,CACfO,KAAM,gBAIRiE,EAASjL,UAAYD,OAAOyC,OAAQmF,OAAgB3H,WACpDiL,EAASjL,UAAUgF,YAAciG,EAClBA,QCjCTxE,EAAQ,CACZ8E,QAAS,UACTC,aAAc,aACdC,YAAa,aACbC,UAAW,WACXC,WAAY,YACZC,UAAW,WACXpE,UAAW,YAEPqE,EAAO,SAASC,GACpB,IAAMlI,EAAQC,KAEVO,EAAQ,EACVC,EAAS,EAEP0H,EAAW,KACbC,EAAU,KACVC,EAAa,KACbC,EAAU,KACRC,EAAa,KACfC,EAAU,KACVC,EAAa,GACbC,EAAiB,KACjBC,EAAM,KACNC,GAAU,EAqDZ,SAASC,IACPH,EAAiBA,IAAmBrH,EAAOM,MAAMC,MAAQP,EAAOM,MAAME,MAAQR,EAAOM,MAAMC,MAC3F,IAAMH,EAAM+G,EAAQnF,SAASqF,GAC1BjH,EACkC,WAA/BgH,EAAWC,GACbE,GAAU,EAC8B,OAA/BH,EAAWC,IACpBC,EAAInB,MAAM/F,GAGZoH,IA9E0B,SAqFfC,EArFe,gGAqF9B,WAA4BnG,GAA5B,mGACQlB,EAAMkB,EAAEjH,KADhB,iBAEmB+F,GAFnB,gEAEYiB,EAFZ,QAGYxC,EAAoBwC,EAApBxC,IAAKE,EAAesC,EAAftC,IAAKU,EAAU4B,EAAV5B,MAHtB,SAIUwH,EAAQrF,KAAK/C,EAAKE,EAAKU,GAJjC,iJAME8H,GAAU,EANZ,gEArF8B,wBAiG9B,SAASG,EAAYpG,GACnBiG,GAAU,EADY,MAEoBjG,EAAEjH,KAApCwE,EAFc,EAEdA,IAAKE,EAFS,EAETA,IAAKU,EAFI,EAEJA,MAAOoC,EAFH,EAEGA,MAAOC,EAFV,EAEUA,MAChCmF,EAAQrF,KAAM/C,EAAKE,EAAKU,GAAQkI,MAAK,WACnCV,EAAQlD,KAAKlC,GAAO8F,MAAK,WACvB,IAAMC,EAAQ,CAAErG,KAAMC,EAAMmF,UAAWtM,KAAMyH,GAC7CnD,EAAM+C,cAAckG,GACpBJ,UAQN,SAASK,EAASvG,GAAG,MACSA,EAAEjH,KAAtBwE,EADW,EACXA,IAAKE,EADM,EACNA,IAAKU,EADC,EACDA,MAClB0H,EAAQvF,KAAK/C,EAAKE,EAAKU,GAEzB,SAASqI,EAAQC,GACfC,sBAAuBF,GACvBG,OAAMC,OAAOH,GACbf,EAAWmB,OAAQpB,EAASD,GAnG9BnI,EAAMK,KAAO,SAASoJ,GAEpBjJ,EAAQ,IACRC,EAAS,IACT2H,EAAU,IAAIsB,OACdtB,EAAQuB,WAAa,IAAIC,OAAO,WAChCzB,EAAW,IAAI0B,OAAmB,GAAIrJ,EAAQC,EAAQ,EAAG,KACzD0H,EAASjH,SAASyF,IAAI,EAAG,GAAI,IAC7B0B,EAAa,IAAIyB,OAAc,CAACL,WAChCpB,EAAW0B,QAASvJ,EAAOC,GAC3B8H,EAAa,IAAIyB,OACjBxB,EAAU,IAAInH,EACdmH,EAAQyB,iBAAkB5I,EAAOwB,MAAMC,MAAOgG,GAC9CN,EAAQyB,iBAAkB5I,EAAOwB,MAAMO,KAAM2F,GAC7CT,EAAU,IAAI3C,EACd2C,EAAQ/B,KAAKiC,EAAQxF,WACrBoF,EAAQpC,IAAKsC,GACbH,EAAS+B,OAAO5B,EAAQpH,UACxBiI,EAAQ,IAEVnJ,EAAMyC,MAAQ,WACZkG,EAAM,IAAItB,EACVsB,EAAIsB,iBAAkB5C,EAASxE,MAAMO,KAAM8F,GAC3CT,EAAWpH,EAAOM,MAAMC,OAAS,SACjC6G,EAAWpH,EAAOM,MAAME,OAAS,KACjC6G,EAAiBrH,EAAOM,MAAMC,MAC9B4G,EAAQ/F,SAOVzC,EAAMmK,MAAQ,SAACjI,EAAGf,GAChB,GAAKyH,EAAL,CACA,IAAMwB,EAAM,IAAIC,OAChBD,EAAIlI,EAAMA,EAAI1B,EAAU,EAAI,EAC5B4J,EAAIjJ,GAAQA,EAAIV,EAAW,EAAI,EAC/B8H,EAAW+B,cAAeF,EAAKjC,GAC/B,IAAM7B,EAAMgC,EAAQrC,IAAIsC,GACxB,GAAIjC,EAAK,OACcA,EAAItH,OAAjBkB,EADD,EACCA,IAAKE,EADN,EACMA,IACboI,EAAQvF,KAAK/C,EAAKE,EAAKsI,MA2D3B1I,EAAMK,KAAK6H,IAGb/L,OAAO2H,OAAQmE,EAAK7L,UAAW2H,OAAgB3H,WAC/C6L,EAAK7L,UAAUgF,YAAc6G,EPnId,OACbnK,KAAM,OACNyM,MAAO,CACLhL,IAAKiL,QAEP9O,KALa,WAMX,MAAO,CACLmE,MAAO,EACPC,MAAO,IAGX2K,UAAW,KACXC,QAZa,WAaXzK,KAAKwK,UAAY,IAAI,EAAaxK,KAAK0K,MAAM,SAC7C1K,KAAKwK,UAAUR,iBAAiB,EAAcjC,UAAW/H,KAAK2K,YAC9D3K,KAAKwK,UAAUhI,SAEjBoI,QAAS,CACPjL,YADO,SACK+C,GACV1C,KAAKwK,UAAUN,MAAMxH,EAAET,EAAIjC,KAAK0K,MAAM,QAAQG,WAAYnI,EAAExB,EAAIlB,KAAK0K,MAAM,QAAQI,YAErFH,WAJO,SAIIjI,GACT1C,KAAKJ,MAAQ8C,EAAEjH,KAAKmE,MACpBI,KAAKH,MAAQ6C,EAAEjH,KAAKoE,S,UQjC1B,EAAO0J,OAAS,EAChB,EAAOwB,UAAY,kBAEJ,QTDA,GACblN,KAAM,MACNmN,WAAY,CACVC,KAAA,I,UULJ,EAAO1B,OAASA,EAED,QCJf2B,eAAUC,GAAKC,MAAM,S,kCCHrB,W,uBCCA,IAAIC,EAA8B,EAAQ,QAC1C9N,EAAU8N,GAA4B,GAEtC9N,EAAQhB,KAAK,CAACiB,EAAOzB,EAAI,2KAA4K,KAErMyB,EAAOD,QAAUA,G,uBCLjB,IAAI8N,EAA8B,EAAQ,QAC1C9N,EAAU8N,GAA4B,GAEtC9N,EAAQhB,KAAK,CAACiB,EAAOzB,EAAI,kLAAmL,KAE5MyB,EAAOD,QAAUA,G,qBCHjB,IAAI+N,EAAU,EAAQ,QACA,kBAAZA,IAAsBA,EAAU,CAAC,CAAC9N,EAAOzB,EAAIuP,EAAS,MAC7DA,EAAQC,SAAQ/N,EAAOD,QAAU+N,EAAQC,QAE5C,IAAIxF,EAAM,EAAQ,QAA+DyF,QACpEzF,EAAI,WAAYuF,GAAS,EAAM,CAAC,WAAY,EAAM,YAAa,K,qBCL5E,IAAIA,EAAU,EAAQ,QACA,kBAAZA,IAAsBA,EAAU,CAAC,CAAC9N,EAAOzB,EAAIuP,EAAS,MAC7DA,EAAQC,SAAQ/N,EAAOD,QAAU+N,EAAQC,QAE5C,IAAIxF,EAAM,EAAQ,QAA4DyF,QACjEzF,EAAI,WAAYuF,GAAS,EAAM,CAAC,WAAY,EAAM,YAAa,K,kCCR5E","file":"js/app.62e59684.js","sourcesContent":[" \t// install a JSONP callback for chunk loading\n \tfunction webpackJsonpCallback(data) {\n \t\tvar chunkIds = data[0];\n \t\tvar moreModules = data[1];\n \t\tvar executeModules = data[2];\n\n \t\t// add \"moreModules\" to the modules object,\n \t\t// then flag all \"chunkIds\" as loaded and fire callback\n \t\tvar moduleId, chunkId, i = 0, resolves = [];\n \t\tfor(;i < chunkIds.length; i++) {\n \t\t\tchunkId = chunkIds[i];\n \t\t\tif(Object.prototype.hasOwnProperty.call(installedChunks, chunkId) && installedChunks[chunkId]) {\n \t\t\t\tresolves.push(installedChunks[chunkId][0]);\n \t\t\t}\n \t\t\tinstalledChunks[chunkId] = 0;\n \t\t}\n \t\tfor(moduleId in moreModules) {\n \t\t\tif(Object.prototype.hasOwnProperty.call(moreModules, moduleId)) {\n \t\t\t\tmodules[moduleId] = moreModules[moduleId];\n \t\t\t}\n \t\t}\n \t\tif(parentJsonpFunction) parentJsonpFunction(data);\n\n \t\twhile(resolves.length) {\n \t\t\tresolves.shift()();\n \t\t}\n\n \t\t// add entry modules from loaded chunk to deferred list\n \t\tdeferredModules.push.apply(deferredModules, executeModules || []);\n\n \t\t// run deferred modules when all chunks ready\n \t\treturn checkDeferredModules();\n \t};\n \tfunction checkDeferredModules() {\n \t\tvar result;\n \t\tfor(var i = 0; i < deferredModules.length; i++) {\n \t\t\tvar deferredModule = deferredModules[i];\n \t\t\tvar fulfilled = true;\n \t\t\tfor(var j = 1; j < deferredModule.length; j++) {\n \t\t\t\tvar depId = deferredModule[j];\n \t\t\t\tif(installedChunks[depId] !== 0) fulfilled = false;\n \t\t\t}\n \t\t\tif(fulfilled) {\n \t\t\t\tdeferredModules.splice(i--, 1);\n \t\t\t\tresult = __webpack_require__(__webpack_require__.s = deferredModule[0]);\n \t\t\t}\n \t\t}\n\n \t\treturn result;\n \t}\n\n \t// The module cache\n \tvar installedModules = {};\n\n \t// object to store loaded and loading chunks\n \t// undefined = chunk not loaded, null = chunk preloaded/prefetched\n \t// Promise = chunk loading, 0 = chunk loaded\n \tvar installedChunks = {\n \t\t\"app\": 0\n \t};\n\n \tvar deferredModules = [];\n\n \t// The require function\n \tfunction __webpack_require__(moduleId) {\n\n \t\t// Check if module is in cache\n \t\tif(installedModules[moduleId]) {\n \t\t\treturn installedModules[moduleId].exports;\n \t\t}\n \t\t// Create a new module (and put it into the cache)\n \t\tvar module = installedModules[moduleId] = {\n \t\t\ti: moduleId,\n \t\t\tl: false,\n \t\t\texports: {}\n \t\t};\n\n \t\t// Execute the module function\n \t\tmodules[moduleId].call(module.exports, module, module.exports, __webpack_require__);\n\n \t\t// Flag the module as loaded\n \t\tmodule.l = true;\n\n \t\t// Return the exports of the module\n \t\treturn module.exports;\n \t}\n\n\n \t// expose the modules object (__webpack_modules__)\n \t__webpack_require__.m = modules;\n\n \t// expose the module cache\n \t__webpack_require__.c = installedModules;\n\n \t// define getter function for harmony exports\n \t__webpack_require__.d = function(exports, name, getter) {\n \t\tif(!__webpack_require__.o(exports, name)) {\n \t\t\tObject.defineProperty(exports, name, { enumerable: true, get: getter });\n \t\t}\n \t};\n\n \t// define __esModule on exports\n \t__webpack_require__.r = function(exports) {\n \t\tif(typeof Symbol !== 'undefined' && Symbol.toStringTag) {\n \t\t\tObject.defineProperty(exports, Symbol.toStringTag, { value: 'Module' });\n \t\t}\n \t\tObject.defineProperty(exports, '__esModule', { value: true });\n \t};\n\n \t// create a fake namespace object\n \t// mode & 1: value is a module id, require it\n \t// mode & 2: merge all properties of value into the ns\n \t// mode & 4: return value when already ns object\n \t// mode & 8|1: behave like require\n \t__webpack_require__.t = function(value, mode) {\n \t\tif(mode & 1) value = __webpack_require__(value);\n \t\tif(mode & 8) return value;\n \t\tif((mode & 4) && typeof value === 'object' && value && value.__esModule) return value;\n \t\tvar ns = Object.create(null);\n \t\t__webpack_require__.r(ns);\n \t\tObject.defineProperty(ns, 'default', { enumerable: true, value: value });\n \t\tif(mode & 2 && typeof value != 'string') for(var key in value) __webpack_require__.d(ns, key, function(key) { return value[key]; }.bind(null, key));\n \t\treturn ns;\n \t};\n\n \t// getDefaultExport function for compatibility with non-harmony modules\n \t__webpack_require__.n = function(module) {\n \t\tvar getter = module && module.__esModule ?\n \t\t\tfunction getDefault() { return module['default']; } :\n \t\t\tfunction getModuleExports() { return module; };\n \t\t__webpack_require__.d(getter, 'a', getter);\n \t\treturn getter;\n \t};\n\n \t// Object.prototype.hasOwnProperty.call\n \t__webpack_require__.o = function(object, property) { return Object.prototype.hasOwnProperty.call(object, property); };\n\n \t// __webpack_public_path__\n \t__webpack_require__.p = \"\";\n\n \tvar jsonpArray = window[\"webpackJsonp\"] = window[\"webpackJsonp\"] || [];\n \tvar oldJsonpFunction = jsonpArray.push.bind(jsonpArray);\n \tjsonpArray.push = webpackJsonpCallback;\n \tjsonpArray = jsonpArray.slice();\n \tfor(var i = 0; i < jsonpArray.length; i++) webpackJsonpCallback(jsonpArray[i]);\n \tvar parentJsonpFunction = oldJsonpFunction;\n\n\n \t// add entry module to deferred list\n \tdeferredModules.push([0,\"chunk-vendors\"]);\n \t// run deferred modules when ready\n \treturn checkDeferredModules();\n","module.exports = __webpack_public_path__ + \"img/square.40d3af04.jpg\";","<template>\n  <game msg=\"Welcome to Your Vue.js App\"/>\n</template>\n\n<script>\nimport Game from './components/game.vue'\n\nexport default {\n  name: 'App',\n  components: {\n    Game\n  }\n}\n</script>\n\n<style>\n#app {\n  font-family: Avenir, Helvetica, Arial, sans-serif;\n  -webkit-font-smoothing: antialiased;\n  -moz-osx-font-smoothing: grayscale;\n  text-align: center;\n  color: #2c3e50;\n  margin-top: 60px;\n}\n</style>\n","<template>\n  <div class=\"game\">\n    <div>Reversi</div>\n    <div><canvas ref=\"game\" width=\"500\" height=\"500\" @click=\"onGameClick\"></canvas></div>\n    <div>\n      <ul>\n        <li><span>黑棋:</span><span>{{black}}</span></li>\n        <li><span>白棋:</span><span>{{white}}</span></li>\n      </ul>\n    </div>\n  </div>\n</template>\n\n<script>\nimport * as Reversi from \"./reversi/main\";\nexport default {\n  name: 'Game',\n  props: {\n    msg: String\n  },\n  data() {\n    return {\n      black: 0,\n      white: 0\n    };\n  },\n  __reversi: null,\n  mounted() {\n    this.__reversi = new Reversi.main(this.$refs['game']);\n    this.__reversi.addEventListener(Reversi.EVENT.GAME_STEP, this.onGameStep);\n    this.__reversi.start();\n  },\n  methods: {\n    onGameClick(e) {\n      this.__reversi.click(e.x - this.$refs['game'].offsetLeft, e.y - this.$refs['game'].offsetTop);\n    },\n    onGameStep(e) {\n      this.black = e.data.black;\n      this.white = e.data.white;\n    }\n  }\n};\n</script>\n\n<!-- Add \"scoped\" attribute to limit CSS to this component only -->\n<style scoped>\nh3 {\n  margin: 40px 0 0;\n}\nul {\n  list-style-type: none;\n  padding: 0;\n}\nli {\n  display: inline-block;\n  margin: 0 10px;\n}\na {\n  color: #42b983;\n}\n</style>\n","import { Mesh, BoxGeometry, MeshBasicMaterial, TextureLoader } from 'three';\r\nimport image from './textures/square.jpg';\r\n/**\r\n *\t方块\r\n */\r\nconst Square = function() {\r\n  const _this = this;\r\n  _this.row = NaN;\r\n  _this.col = NaN;\r\n\t/**\r\n\t *\t初始化\r\n\t */\r\n\t_this.init = () => {\r\n    const g = new BoxGeometry(Square.WIDTH, Square.HEIGHT, Square.WIDTH);\r\n    const t = new TextureLoader().load(image);\r\n    const m = new MeshBasicMaterial( { color: 0xffaa00, map: t } );\r\n    Mesh.call(_this, g, m);\r\n  };\r\n  _this.blink = () => {\r\n    _this.position.y += 5;\r\n  };\r\n\t_this.init();\r\n};\r\n\r\nSquare.WIDTH = 10;\r\nSquare.HEIGHT = 2;\r\n\r\nSquare.prototype = Object.create( Mesh.prototype );\r\nSquare.prototype.constructor = Square;\r\nexport default Square;","import { EventDispatcher } from 'three';\r\n/**\r\n *\t引擎\r\n */\r\nconst Engine = function(){\r\n  const _this = this;\r\n  let _data = null; // 棋盘数据\r\n  let _action = null; // 行动方\r\n  /**\r\n   *\t初始化\r\n   */\r\n  _this.init = function() {\r\n    _this.reset();\r\n  };\r\n  /**\r\n   * 复位\r\n   */\r\n  _this.reset = () => {\r\n    _data = [];\r\n    for(let m = 0; m < Engine.ROW; m++) {\r\n      const arr = [];\r\n      for(let n = 0; n < Engine.COL; n++) {\r\n        arr.push(0);\r\n      }\r\n      _data.push(arr);\r\n    }\r\n  };\r\n  /**\r\n   * 开始游戏\r\n   */\r\n  _this.start = () => {\r\n    const arr = [];\r\n    arr.push({row: 3, col: 4, color: Engine.CHESS.BLACK});\r\n    arr.push({row: 3, col: 3, color: Engine.CHESS.WHITE});\r\n    arr.push({row: 4, col: 3, color: Engine.CHESS.BLACK});\r\n    arr.push({row: 4, col: 4, color: Engine.CHESS.WHITE});\r\n    for(const obj of arr) {\r\n      const { row, col, color } = obj;\r\n      _data[row][col] = color;\r\n    }\r\n    _action = Engine.CHESS.BLACK;\r\n    const e = { type: Engine.EVENT.START, data: arr };\r\n    _this.dispatchEvent(e);\r\n  };\r\n  /**\r\n   * 获取数据\r\n   */\r\n  _this.getData = () => {\r\n    return _data;\r\n  };\r\n  /**\r\n   * 走棋\r\n   * @param {int} row 行\r\n   * @param {int} col 列\r\n   * @param {int} color 棋子颜色\r\n   */\r\n  _this.move = (row, col, color) => {\r\n    let flips  = getFilp(row, col, color);\r\n    if(flips) {\r\n      for(const obj of flips) {\r\n        _data[obj.row][obj.col] = color;\r\n      }\r\n    } else {\r\n      return;\r\n    }\r\n    _data[row][col] = color;\r\n    const count = getCount();\r\n    const data = { row, col, color, flips, count };\r\n    const e = { type: Engine.EVENT.MOVE, data };\r\n    _this.dispatchEvent(e);\r\n  };\r\n  function getFilp(row, col, color) {\r\n    if (_data[row][col] !== 0) {\r\n      return false;\r\n    }\r\n    if (!isValid(col, row)) {\r\n      return false;\r\n    }\r\n    _data[row][col] = color;\r\n    const arr = [];\r\n    const opColor = color === Engine.CHESS.BLACK ? Engine.CHESS.WHITE : Engine.CHESS.BLACK;\r\n    const direction = [[0, 1], [1, 1], [1, 0], [1, -1], [0, -1], [-1, -1], [-1, 0], [-1, 1]];\r\n    for(const coord of direction) {\r\n      const [ xdirection, ydirection ] = coord;\r\n      let x = parseInt(col);\r\n      let y = parseInt(row);\r\n      x += xdirection;\r\n      y += ydirection;\r\n      if(isValid(y, x) && _data[y][x] === opColor) {\r\n        do {\r\n          x += xdirection;\r\n          y += ydirection;  \r\n          if(!isValid(y, x)) break;\r\n        } while(_data[y][x] === opColor);\r\n      }\r\n      if(!isValid(y, x)) continue;\r\n      if(_data[y][x] === color) {\r\n        while (isValid(y, x)) {          \r\n          x -= xdirection;\r\n          y -= ydirection;\r\n          if (y == parseInt(row) && x == parseInt(col)) break;\r\n          arr.push({col:x, row:y});\r\n        }\r\n        // for(x -= xdirection, y -= ydirection;x !== parseInt(col) && y !== parseInt(row);x -= xdirection,y -= ydirection) {\r\n        //   arr.push({col:x, row:y});\r\n        // }\r\n      }\r\n    }\r\n    _data[row][col] = 0;\r\n    if(arr.length === 0) return false;\r\n    return arr;\r\n  }\r\n  /**\r\n   * 获取合法点\r\n   * @param {emun} color 棋色\r\n   */\r\n  _this.getLegal = (color) => {\r\n    const direction = [[-1, 0], [-1, 1], [0, 1], [1, 1], [1, 0], [1, -1], [0, -1], [-1, -1]];\r\n    const opColor = color === Engine.CHESS.BLACK ? Engine.CHESS.WHITE : Engine.CHESS.BLACK;\r\n    const nears = [];\r\n    for(const m in _data) {\r\n      for(const n in _data[m]) {\r\n        if(_data[m][n] === opColor) {\r\n          for(const coord of direction) {\r\n            const [ dx, dy ] = coord;\r\n            let x = parseInt(n) + dx;\r\n            let y = parseInt(m) + dy;\r\n            if(isValid(y, x) && _data[y][x]=== Engine.CHESS.NONE\r\n            && nears.findIndex(k => k[0] === x && k[1] === y) === -1) {\r\n              nears.push([x, y]);\r\n            }\r\n          }\r\n        }\r\n      }\r\n    }\r\n    const arr = [];\r\n    for(const coord of nears) {\r\n      if(getFilp(coord[1], coord[0], color)) {\r\n        arr.push(coord);\r\n      }\r\n    }\r\n    return arr;\r\n  };\r\n  /**\r\n   * 在棋盘上\r\n   * @param {int} row 行\r\n   * @param {int} col 列\r\n   */\r\n  function isValid( row, col ) {\r\n    return (row >= 0 && row <= Engine.ROW - 1 && col >= 0 && col <= Engine.COL - 1);\r\n  }\r\n  /**\r\n   * 获取统计\r\n   */\r\n  function getCount() {\r\n    const counter = {\r\n      black: 0,\r\n      white: 0\r\n    };\r\n    for(const row of _data) {\r\n      for(const col of row) {\r\n        if(col === Engine.CHESS.BLACK) {\r\n          counter.black++;\r\n        } else if(col === Engine.CHESS.WHITE) {\r\n          counter.white++;\r\n        }\r\n      }\r\n    }\r\n    return counter;\r\n  }\r\n  _this.init();\r\n};\r\nEngine.ROW = 8;\r\nEngine.COL = 8;\r\nEngine.CHESS = {\r\n  NONE: 0,\r\n  BLACK: 1,\r\n  WHITE: 2\r\n};\r\nEngine.EVENT = {\r\n  START: \"gameStart\",\r\n  GAME_OVER: \"gameOver\",\r\n  MOVE: \"chessMove\",\r\n  FLIP: \"chessFlip\"\r\n};\r\n\r\nObject.assign( Engine.prototype, EventDispatcher.prototype );\r\nEngine.prototype.constructor = Engine;\r\nexport default Engine;","import { Mesh, CylinderGeometry, MeshBasicMaterial } from 'three';\r\nimport { Tween, Easing } from '@tweenjs/tween.js';\r\nimport Engine from './engine';\r\n/**\r\n *\t棋子\r\n */\r\nconst Piece = function(param) {\r\n  const _this = this;\r\n\t/**\r\n\t *\t初始化\r\n\t */\r\n\t_this.init = (color) => {\r\n    const geometry = new CylinderGeometry(Piece.RADIUS, Piece.RADIUS, Piece.WIDTH, Piece.SEGMENT);\r\n    const materials = [\r\n      new MeshBasicMaterial( { color: \"red\" } ),\r\n      new MeshBasicMaterial( { color: \"black\" } ),\r\n      new MeshBasicMaterial( { color: \"white\" } )\r\n    ];\r\n    Mesh.call(_this, geometry, materials);\r\n    if(color == Engine.CHESS.WHITE) {\r\n      _this.rotation.x = Math.PI;\r\n    }\r\n  };\r\n  /**\r\n   * 走棋\r\n   */\r\n  _this.move = () => {\r\n    return new Promise((resolve) => {\r\n      let coord = { y: 10 };\r\n      const t = new Tween(coord).to({y:0}, 500).easing(Easing.Quadratic.In);\r\n      t.onUpdate((e) => {_this.position.y = e.y;});\r\n      t.onComplete(e => {resolve(e);});\r\n      t.start();\r\n    });\r\n  };\r\n  /**\r\n   * 翻转\r\n   * @param {int} delay 延迟\r\n   */\r\n  _this.flip = (delay = 0) => {\r\n    return new Promise((resolve) => {\r\n      let rotation = { x: 0 };\r\n      const initX = _this.rotation.x;\r\n      let coord = { y: 0 };\r\n      const up = new Tween(coord).to({y: 10}, 300).onUpdate((e) => {_this.position.y = e.y;});\r\n      const down = new Tween(coord).to({y: 0}, 200).onUpdate((e) => {_this.position.y = e.y;});\r\n      const spin = new Tween(rotation).to({x: Math.PI}, 300).onUpdate((e) => {_this.rotation.x = initX + e.x;});\r\n      spin.onComplete(e => {resolve(e);});\r\n      spin.chain(down);\r\n      up.chain(spin);\r\n      up.delay(delay);\r\n      up.start();\r\n    });\r\n  };\r\n\t_this.init(param);\r\n};\r\n\r\nPiece.RADIUS = 4;\r\nPiece.HEIGHT = 1;\r\nPiece.SEGMENT = 20;\r\n\r\nPiece.prototype = Object.create( Mesh.prototype );\r\nPiece.prototype.constructor = Piece;\r\nexport default Piece;","import { Object3D } from 'three';\r\nimport Square from './square';\r\nimport Piece from './piece';\r\n\r\n/**\r\n *\t棋盘\r\n */\r\nconst Board = function() {\r\n  const _this = this;\r\n  let __bg = null, // 背景\r\n    __chess = null; // 棋子\r\n  _this.offset = { // 偏移位置\r\n    row: 0,\r\n    col: 0,\r\n  };\r\n\t/**\r\n\t *\t初始化\r\n\t */\r\n\t_this.init = () => {\r\n    Object3D.call(_this);\r\n    __bg = new Object3D();\r\n    __chess = new Object3D();\r\n    _this.add(__bg, __chess);\r\n  };\r\n  /**\r\n   * 触碰\r\n   * @param {raycaster} raycaster 射线\r\n   */\r\n  _this.hit = raycaster => {\r\n    const intersects = raycaster.intersectObjects( __bg.children );\r\n    let ret = null;\r\n    if(intersects.length > 0) {\r\n      ret = intersects[0];\r\n    }\r\n    return ret;\r\n  };\r\n  /**\r\n   * 铺路\r\n   */\r\n  _this.pave = (data) => {\r\n    __bg.clear();\r\n    _this.offset.row = data.length / 2 * Square.WIDTH - Square.WIDTH / 2;\r\n    _this.offset.col = _this.offset.row;\r\n    for ( const m in data ) {\r\n      for ( const n in data[m] ) {\r\n        const square = new Square();\r\n        square.row = m;\r\n        square.col = n;\r\n        square.position.x = n * Square.WIDTH;\r\n        square.position.z = m * Square.WIDTH;\r\n        __bg.add(square);\r\n      }\r\n    }\r\n    __bg.position.set(-_this.offset.col, 0, -_this.offset.row);\r\n    __chess.position.set(-_this.offset.col, Square.HEIGHT, -_this.offset.row);\r\n  };\r\n  /**\r\n   * 走棋\r\n   * @param {int} row 行\r\n   * @param {int} col 列\r\n   * @param {int} color 颜色\r\n   */\r\n  _this.move = (row, col, color) => {\r\n    const piece = new Piece(color);\r\n    piece.position.x = col * Square.WIDTH;\r\n    piece.position.z = row * Square.WIDTH;\r\n    piece.name = `${row}-${col}`;\r\n    __chess.add(piece);\r\n    return piece.move();\r\n  };\r\n  /**\r\n   * 翻转\r\n   * @param {array} arr \r\n   */\r\n  _this.flip = (arr) => {\r\n    const list = [];\r\n    if (arr) {\r\n      for(const k in arr) {\r\n        const { row, col } = arr[k];\r\n        const piece = __chess.getObjectByName(`${row}-${col}`);\r\n        list.push(piece.flip(parseInt(k) * 500));\r\n      }\r\n    }\r\n    return Promise.all(list);\r\n  };\r\n\t_this.init();\r\n};\r\n\r\nBoard.prototype = Object.create( Object3D.prototype );\r\nBoard.prototype.constructor = Board;\r\nexport default Board;","/**\r\n * Roxanne 策略 详见 《Analysis of Monte Carlo Techniques in Othello》 \r\n * 提出者：Canosa, R. Roxanne canosa homepage. https://www.cs.rit.edu/~rlc/ \r\n */\r\nclass Roxanne {\r\n  constructor() {\r\n    this._table = [\r\n      [ [0, 0], [0, 7], [7, 0], [7, 7] ],\r\n      [ [2, 2], [2, 5], [5, 2], [5, 5] ],\r\n      [ [3, 2], [3, 5], [4, 2], [4, 5], [2, 3], [2, 4], [5, 3], [5, 4] ],\r\n      [ [2, 0], [2, 7], [5, 0], [5, 7], [0, 2], [0, 5], [7, 2], [7, 5] ],\r\n      [ [3, 0], [3, 7], [4, 0], [4, 7], [0, 3], [0, 4], [7, 3], [7, 4] ],\r\n      [ [2, 1], [2, 6], [5, 1], [5, 6], [1, 2], [1, 5], [6, 2], [6, 5] ],\r\n      [ [3, 1], [3, 6], [4, 1], [4, 6], [1, 3], [1, 4], [6, 3], [6, 4] ],\r\n      [ [1, 1], [1, 6], [6, 1], [6, 6] ],\r\n      [ [1, 0], [1, 7], [6, 0], [6, 7], [0, 1], [0, 6], [7, 1], [7, 6]]\r\n    ];\r\n  }\r\n  select(arr) {\r\n    if (arr && arr.length > 0) {\r\n      for(const moves of this._table) {\r\n        moves.sort(() => 0.5 - Math.random());\r\n        for(const move of moves) {\r\n          if(arr.findIndex(n => n[0] === move[0] && n[1] === move[1]) > -1) {\r\n            return move;\r\n          }\r\n        }\r\n      }\r\n    } else {\r\n      return false;\r\n    }\r\n  }\r\n}\r\nexport default Roxanne;","import { EventDispatcher } from 'three';\r\nimport Engine from './engine';\r\nimport Roxanne from './roxanne';\r\n\r\n/**\r\n *\t电脑玩家\r\n */\r\nconst AIPlayer = function() {\r\n  const _this = this;\r\n  let _roxnane = null;\r\n\t/**\r\n\t *\t初始化\r\n\t */\r\n\t_this.init = () => {\r\n    _roxnane = new Roxanne();\r\n  };\r\n  /**\r\n   * 获取棋色\r\n   */\r\n  _this.getColor = () => {\r\n    return Engine.CHESS.WHITE;\r\n  };\r\n  /**\r\n   * 思考\r\n   * @param {Array} arr 可走的步骤\r\n   */\r\n  _this.think = (arr) => {\r\n    // const [ col, row ] = arr[parseInt(Math.random() * arr.length)];\r\n    const [ col, row ] = _roxnane.select(arr);\r\n    const data = { col, row, color: _this.getColor() };\r\n    setTimeout(() => {\r\n      const e = { type: AIPlayer.EVENT.MOVE, data };\r\n      _this.dispatchEvent(e);        \r\n    }, 1000);\r\n  };\r\n\t_this.init();\r\n};\r\n\r\nAIPlayer.EVENT = {\r\n  MOVE: \"aiPlayerMove\"\r\n};\r\n\r\n\r\nAIPlayer.prototype = Object.create( EventDispatcher.prototype );\r\nAIPlayer.prototype.constructor = AIPlayer;\r\nexport default AIPlayer;","import { WebGLRenderer, EventDispatcher, PerspectiveCamera, Scene, Color, Raycaster, Vector2 } from 'three';\r\nimport TWEEN from '@tweenjs/tween.js';\r\nimport Board from './board';\r\nimport Engine from './engine';\r\nimport AIPlayer from './ai-player';\r\n/**\r\n *\t版本\r\n */\r\nconst VER = \"1.0\";\r\n/**\r\n *\t事件\r\n */\r\nconst EVENT = {\r\n  RUNNING:\t\"running\",\r\n  MODEL_LOADED:\t\"modeLoaded\",\r\n  PERSON_FAIL: \"personFail\",\r\n  GAME_INIT: \"gameInit\",\r\n  GAME_START:\t\"gameStart\",\r\n  GAME_STEP: \"gameStep\",\r\n  GAME_OVER:\t\"gameOver\"\r\n};\r\nconst main = function(container){\r\n  const _this = this;\r\n  \r\n  let WIDTH = 0,\r\n    HEIGHT = 0;\r\n    \r\n  let __camera = null,\t//摄像头\r\n    __scene = null,\t//场景\r\n    __renderer = null,\t//渲染器\r\n    __board = null;\t//棋盘\r\n  let _raycaster = null, // 射线\r\n    _engine = null, // 游戏引擎\r\n    _situation = {}, // 对阵局势\r\n    _operantPlayer = null, //操作者\r\n    _ai = null, // 电脑玩家\r\n    _enable = false; // 激活状态\r\n  var __stats = null;\t//fps\r\n  /**\r\n   *\t初始化\r\n   */\r\n  _this.init = function(canvas) {\r\n    // console.log(container.attributes);\r\n    WIDTH = 500;\r\n    HEIGHT = 500;\r\n    __scene = new Scene();\r\n    __scene.background = new Color( 'skyblue' );\r\n    __camera = new PerspectiveCamera( 75, WIDTH / HEIGHT, 1, 1000 );\r\n    __camera.position.set(0, 60, 20);\r\n    __renderer = new WebGLRenderer({canvas});\r\n    __renderer.setSize( WIDTH, HEIGHT );\r\n    _raycaster = new Raycaster();\r\n    _engine = new Engine();\r\n    _engine.addEventListener( Engine.EVENT.START, onChessStart );\r\n    _engine.addEventListener( Engine.EVENT.MOVE, onChessMove );\r\n    __board = new Board();\r\n    __board.pave(_engine.getData());\r\n    __scene.add( __board );\r\n    __camera.lookAt(__board.position);\r\n    animate(0);\r\n  };\r\n  _this.start = () => {\r\n    _ai = new AIPlayer();\r\n    _ai.addEventListener( AIPlayer.EVENT.MOVE, onAIMove );\r\n    _situation[Engine.CHESS.BLACK] = 'player';\r\n    _situation[Engine.CHESS.WHITE] = 'ai';\r\n    _operantPlayer = Engine.CHESS.BLACK;\r\n    _engine.start();\r\n  };\r\n  /**\r\n   * 点击\r\n   * @param {int} x \r\n   * @param {int} y \r\n   */\r\n  _this.click = (x, y) => {\r\n    if (!_enable) return;\r\n    const vec = new Vector2();\r\n    vec.x = ( x / WIDTH ) * 2 - 1;\r\n    vec.y = - ( y / HEIGHT ) * 2 + 1;\r\n    _raycaster.setFromCamera( vec, __camera ); // 根据摄像头引射线\r\n    const ret = __board.hit(_raycaster); // 射线触碰决定用户点击的位置\r\n    if (ret) { // 玩家走棋\r\n      const { row, col } = ret.object;\r\n      _engine.move(row, col, _operantPlayer);\r\n    }\r\n  };\r\n  /**\r\n   * 交换操作者\r\n   */\r\n  function switchOperantPlayer() {\r\n    _operantPlayer = _operantPlayer === Engine.CHESS.BLACK ? Engine.CHESS.WHITE : Engine.CHESS.BLACK;\r\n    const arr = _engine.getLegal(_operantPlayer);\r\n    if(arr) {\r\n      if (_situation[_operantPlayer] === \"player\") {\r\n        _enable = true;\r\n      } else if (_situation[_operantPlayer] === \"ai\") {\r\n        _ai.think(arr);\r\n      }\r\n    } else {\r\n      switchOperantPlayer();\r\n    }\r\n  }\r\n  /**\r\n   * 游戏开始\r\n   * @param {event} e \r\n   */\r\n  async function onChessStart(e) {\r\n    const arr = e.data;\r\n    for(const obj of arr) {\r\n      const { row, col, color } = obj;\r\n      await __board.move(row, col, color);\r\n    }\r\n    _enable = true;\r\n  }\r\n  /**\r\n   * 走棋\r\n   * @param {event} e \r\n   */\r\n  function onChessMove(e) {\r\n    _enable = false;\r\n    const { row, col, color, flips, count } = e.data;\r\n    __board.move( row, col, color ).then(() => {\r\n      __board.flip(flips).then(() => {\r\n        const event = { type: EVENT.GAME_STEP, data: count};\r\n        _this.dispatchEvent(event);\r\n        switchOperantPlayer();\r\n      });\r\n    });\r\n  }\r\n  /**\r\n   * 电脑走棋\r\n   * @param {event} e \r\n   */\r\n  function onAIMove(e) {\r\n    const { row, col, color } = e.data;\r\n    _engine.move(row, col, color);\r\n  }\r\n  function animate(time) {\r\n    requestAnimationFrame( animate );\r\n    TWEEN.update(time);\r\n    __renderer.render( __scene, __camera );\r\n  }\r\n  _this.init(container);\r\n};\r\n\r\nObject.assign( main.prototype, EventDispatcher.prototype);\r\nmain.prototype.constructor = main;\r\nexport {main, VER, EVENT};","import { render } from \"./game.vue?vue&type=template&id=1bfa8ec2&scoped=true\"\nimport script from \"./game.vue?vue&type=script&lang=js\"\nexport * from \"./game.vue?vue&type=script&lang=js\"\n\nimport \"./game.vue?vue&type=style&index=0&id=1bfa8ec2&scoped=true&lang=css\"\nscript.render = render\nscript.__scopeId = \"data-v-1bfa8ec2\"\n\nexport default script","import { render } from \"./app.vue?vue&type=template&id=a9fca96e\"\nimport script from \"./app.vue?vue&type=script&lang=js\"\nexport * from \"./app.vue?vue&type=script&lang=js\"\n\nimport \"./app.vue?vue&type=style&index=0&id=a9fca96e&lang=css\"\nscript.render = render\n\nexport default script","import { createApp } from 'vue';\nimport App from './app.vue';\n\ncreateApp(App).mount('#app');\n","export * from \"-!../node_modules/vue-style-loader/index.js??ref--6-oneOf-1-0!../node_modules/css-loader/dist/cjs.js??ref--6-oneOf-1-1!../node_modules/vue-loader-v16/dist/stylePostLoader.js!../node_modules/postcss-loader/src/index.js??ref--6-oneOf-1-2!../node_modules/postcss-loader/src/index.js??ref--6-oneOf-1-3!../node_modules/cache-loader/dist/cjs.js??ref--0-0!../node_modules/vue-loader-v16/dist/index.js??ref--0-1!./app.vue?vue&type=style&index=0&id=a9fca96e&lang=css\"","// Imports\nvar ___CSS_LOADER_API_IMPORT___ = require(\"../node_modules/css-loader/dist/runtime/api.js\");\nexports = ___CSS_LOADER_API_IMPORT___(false);\n// Module\nexports.push([module.id, \"#app{font-family:Avenir,Helvetica,Arial,sans-serif;-webkit-font-smoothing:antialiased;-moz-osx-font-smoothing:grayscale;text-align:center;color:#2c3e50;margin-top:60px}\", \"\"]);\n// Exports\nmodule.exports = exports;\n","// Imports\nvar ___CSS_LOADER_API_IMPORT___ = require(\"../../node_modules/css-loader/dist/runtime/api.js\");\nexports = ___CSS_LOADER_API_IMPORT___(false);\n// Module\nexports.push([module.id, \"h3[data-v-1bfa8ec2]{margin:40px 0 0}ul[data-v-1bfa8ec2]{list-style-type:none;padding:0}li[data-v-1bfa8ec2]{display:inline-block;margin:0 10px}a[data-v-1bfa8ec2]{color:#42b983}\", \"\"]);\n// Exports\nmodule.exports = exports;\n","// style-loader: Adds some css to the DOM by adding a <style> tag\n\n// load the styles\nvar content = require(\"!!../../node_modules/css-loader/dist/cjs.js??ref--6-oneOf-1-1!../../node_modules/vue-loader-v16/dist/stylePostLoader.js!../../node_modules/postcss-loader/src/index.js??ref--6-oneOf-1-2!../../node_modules/postcss-loader/src/index.js??ref--6-oneOf-1-3!../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../node_modules/vue-loader-v16/dist/index.js??ref--0-1!./game.vue?vue&type=style&index=0&id=1bfa8ec2&scoped=true&lang=css\");\nif(typeof content === 'string') content = [[module.id, content, '']];\nif(content.locals) module.exports = content.locals;\n// add the styles to the DOM\nvar add = require(\"!../../node_modules/vue-style-loader/lib/addStylesClient.js\").default\nvar update = add(\"2318e3d4\", content, true, {\"sourceMap\":false,\"shadowMode\":false});","// style-loader: Adds some css to the DOM by adding a <style> tag\n\n// load the styles\nvar content = require(\"!!../node_modules/css-loader/dist/cjs.js??ref--6-oneOf-1-1!../node_modules/vue-loader-v16/dist/stylePostLoader.js!../node_modules/postcss-loader/src/index.js??ref--6-oneOf-1-2!../node_modules/postcss-loader/src/index.js??ref--6-oneOf-1-3!../node_modules/cache-loader/dist/cjs.js??ref--0-0!../node_modules/vue-loader-v16/dist/index.js??ref--0-1!./app.vue?vue&type=style&index=0&id=a9fca96e&lang=css\");\nif(typeof content === 'string') content = [[module.id, content, '']];\nif(content.locals) module.exports = content.locals;\n// add the styles to the DOM\nvar add = require(\"!../node_modules/vue-style-loader/lib/addStylesClient.js\").default\nvar update = add(\"660cbf8c\", content, true, {\"sourceMap\":false,\"shadowMode\":false});","export * from \"-!../../node_modules/vue-style-loader/index.js??ref--6-oneOf-1-0!../../node_modules/css-loader/dist/cjs.js??ref--6-oneOf-1-1!../../node_modules/vue-loader-v16/dist/stylePostLoader.js!../../node_modules/postcss-loader/src/index.js??ref--6-oneOf-1-2!../../node_modules/postcss-loader/src/index.js??ref--6-oneOf-1-3!../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../node_modules/vue-loader-v16/dist/index.js??ref--0-1!./game.vue?vue&type=style&index=0&id=1bfa8ec2&scoped=true&lang=css\""],"sourceRoot":""}